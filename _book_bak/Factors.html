<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-99.9.9">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>PDSR - 9&nbsp; Factors</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./DataIO.html" rel="next">
<link href="./Indexing.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-163213745-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script><link rel="stylesheet" href="bootstrap.lambdamd.css">
</head>
<body class="nav-sidebar floating">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Factors</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">PDSR</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/egenn/pdsr/tree/master/src/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Welcome</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Preface.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Introduction.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./IDEs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">IDEs</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Rlang.html" class="sidebar-item-text sidebar-link">The R language</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Packages.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">R packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./BasicOps.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Basic operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DataTypes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Types &amp; Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DataStructures.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Structures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Indexing.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Indexing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Factors.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Factors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DataIO.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Input/Output</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Vectorization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Vectorized Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ControlFlow.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Control flow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Summarize.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Summarizing Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Aggregate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Aggregate</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Functions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./LoopFunctions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Loop Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DataFrames.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data frames</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TableJoins.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Table joins</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reshaping.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Reshaping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DataTrans.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Data Transformations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./MissingData.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Handling Missing data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./StringOps.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">String Operations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DateTime.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Date and Time</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ClassesAndOOP.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Classes and Object-Oriented Programming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Profiling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Benchmarking &amp; Profiling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Optimization.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./HypothesisTesting.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Common statistical tests</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GLM.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Introduction to the GLM</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./DataTable.html" class="sidebar-item-text sidebar-link">Data Table</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./DataTableI.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Efficient data analysis with <strong>data.table</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dtmerge.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Merge tables</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dtreshape.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Reshape</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Tidyverse.html" class="sidebar-item-text sidebar-link">Tidyverse</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dplyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Introduction to dplyr</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tidyr.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Reshaping with <strong>tidyr</strong></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lubridate.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Handling dates with <strong>lubridate</strong></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./Graphics.html" class="sidebar-item-text sidebar-link">Graphics</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./BaseGraphics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Base Graphics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Colors.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Colors in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3xGraphics.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">3x Graphics</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./IntroML.html" class="sidebar-item-text sidebar-link">Introduction to Machine Learning</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Resampling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Resampling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Supervised.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Supervised Learning</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Unsupervised.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Unsupervised Learning</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./System.html" class="sidebar-item-text sidebar-link">System</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./TerminalIntro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Introduction to the system shell</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./GitHubIntro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Git &amp; GitHub: the basics</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Resources.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CrashCourse.html" class="sidebar-item-text sidebar-link">Crash Course</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./References.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#factorsintro" id="toc-factorsintro" class="nav-link active" data-scroll-target="#factorsintro"><span class="toc-section-number">9.1</span>  Factors (introductory)</a>
  <ul class="collapse">
<li><a href="#create-a-factor" id="toc-create-a-factor" class="nav-link" data-scroll-target="#create-a-factor"><span class="toc-section-number">9.1.1</span>  Create a factor</a></li>
  <li><a href="#set-the-order-of-factor-levels" id="toc-set-the-order-of-factor-levels" class="nav-link" data-scroll-target="#set-the-order-of-factor-levels"><span class="toc-section-number">9.1.2</span>  Set the order of factor levels</a></li>
  <li><a href="#define-level-labels" id="toc-define-level-labels" class="nav-link" data-scroll-target="#define-level-labels"><span class="toc-section-number">9.1.3</span>  Define level labels</a></li>
  <li><a href="#change-level-labels-of-existing-factor" id="toc-change-level-labels-of-existing-factor" class="nav-link" data-scroll-target="#change-level-labels-of-existing-factor"><span class="toc-section-number">9.1.4</span>  Change level labels of existing factor</a></li>
  </ul>
</li>
  <li>
<a href="#factors-advanced" id="toc-factors-advanced" class="nav-link" data-scroll-target="#factors-advanced"><span class="toc-section-number">9.2</span>  Factors (advanced)</a>
  <ul class="collapse">
<li><a href="#the-underlying-integer-vector" id="toc-the-underlying-integer-vector" class="nav-link" data-scroll-target="#the-underlying-integer-vector"><span class="toc-section-number">9.2.1</span>  The underlying <strong>integer vector</strong></a></li>
  <li><a href="#the-mapping-of-integers-to-labels" id="toc-the-mapping-of-integers-to-labels" class="nav-link" data-scroll-target="#the-mapping-of-integers-to-labels"><span class="toc-section-number">9.2.2</span>  The <strong>mapping of integers to labels</strong></a></li>
  <li><a href="#is-the-factor-ordered" id="toc-is-the-factor-ordered" class="nav-link" data-scroll-target="#is-the-factor-ordered"><span class="toc-section-number">9.2.3</span>  Is the factor <strong>ordered</strong></a></li>
  <li><a href="#change-order-of-levels-or-labels" id="toc-change-order-of-levels-or-labels" class="nav-link" data-scroll-target="#change-order-of-levels-or-labels"><span class="toc-section-number">9.2.4</span>  Change order of levels or labels</a></li>
  <li><a href="#fatal-error-to-avoid" id="toc-fatal-error-to-avoid" class="nav-link" data-scroll-target="#fatal-error-to-avoid"><span class="toc-section-number">9.2.5</span>  Fatal error to avoid</a></li>
  <li><a href="#factor-to-numeric" id="toc-factor-to-numeric" class="nav-link" data-scroll-target="#factor-to-numeric"><span class="toc-section-number">9.2.6</span>  Factor to numeric</a></li>
  </ul>
</li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="toc-section-number">9.3</span>  Summary</a></li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/egenn/pdsr/edit/master/src/Factors.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/egenn/pdsr/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="factors" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Factors</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><p>Factors in R are used to store <strong>categorical variables</strong> and therefore have many important uses in statistics / data science / machine learning.</p>
<p>For example, factors can be used to store information on sex, race, diagnosis, treatment group, etc.</p>
<div class="cell" data-layout-align="center" data-hash="Factors_cache/html/unnamed-chunk-1_77861581e335299f41d15d7bc08a974a">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="./R_factors.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Factors in R - Best to read through this chapter first and then refer back to this figure</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>If you are new to R and to factors, begin with the following introductory-level section.</p>
<section id="factorsintro" class="level2" data-number="9.1"><h2 data-number="9.1" class="anchored" data-anchor-id="factorsintro">
<span class="header-section-number">9.1</span> Factors (introductory)</h2>
<div class="cell" type="rmdnote" data-hash="Factors_cache/html/unnamed-chunk-2_9bfcf4970ba969f205848209fdcc0b75">
<div class="rmdnote">
<p>
Factors in R are a special type of vector.
</p>
<ul>
<li>
<p>
Each element can take one value from a set known as the factor’s <strong>levels</strong>
</p>
</li>
<li>
<p>
A factor’s levels are stored in a particular <strong>order</strong>, which affects how that factor is treated by some functions, e.g.&nbsp;in hypothesis testing, model fitting, visualization, etc.
</p>
</li>
<li>
<p>
You can specify whether or not the order of the levels defines a quantitative relationship such that level1 &lt; level2, etc., in which case the factor is known as <strong>ordered</strong>
</p>
</li>
</ul>
</div>
</div>
<p>You can create a factor by passing a numeric or character vector to <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> or to <code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code>.</p>
<p>The difference between the two is that <code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code> does not accept any arguments while <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> does.</p>
<p>Let’s start with a character vector that includes three unique values - “a”, “b”, and “c”:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-3_6f38f267e92b2520477704eaebe36248">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"c"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a" "c" "b" "b" "a" "a" "b" "c"</code></pre>
</div>
</div>
<p>Assume that “a”, “b”, and “c” define three different groups and we want to convert this character vector to a factor.<br><code><a href="https://rdrr.io/r/base/factor.html">as.factor()</a></code> and <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> without any arguments produce the same output:</p>
<section id="create-a-factor" class="level3" data-number="9.1.1"><h3 data-number="9.1.1" class="anchored" data-anchor-id="create-a-factor">
<span class="header-section-number">9.1.1</span> Create a factor</h3>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-4_280975da9c703396df3b707ba2b925c1">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">xf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] a c b b a a b c
Levels: a b c</code></pre>
</div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">xf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xftoo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="va">xftoo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] a c b b a a b c
Levels: a b c</code></pre>
</div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">xftoo</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
</div>
<p>Notice how a factor is printed in the R console:</p>
<ul>
<li>The elements are printed without double quotes around them, differentiating them from character vectors.</li>
<li>The factor levels are printed below the vector values.</li>
</ul>
<p><code><a href="https://rdrr.io/r/base/table.html">table()</a></code> is a very useful function for factors - it gives the counts for each level:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-5_b83e8f4c47ee3ce980d9000dc8ff6358">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">xf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>xf
a b c 
3 3 2 </code></pre>
</div>
</div>
<p>Let’s look at a different example. We define a factor to identify cases and controls:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-6_d77e74eb39a497d7f8f3020a6cdfa52f">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"case"</span>, <span class="st">"control"</span>, <span class="st">"control"</span>, <span class="st">"case"</span>, <span class="st">"control"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] case    control control case    control
Levels: case control</code></pre>
</div>
</div>
<div class="cell" type="rmdnote" data-hash="Factors_cache/html/unnamed-chunk-7_a68095fcb8d5b1397bcacc55fb1ed2b4">
<div class="rmdnote">
<p>
By default, the levels are ordered <em>alphabetically</em>.
</p>
</div>
</div>
</section><section id="set-the-order-of-factor-levels" class="level3" data-number="9.1.2"><h3 data-number="9.1.2" class="anchored" data-anchor-id="set-the-order-of-factor-levels">
<span class="header-section-number">9.1.2</span> Set the order of factor levels</h3>
<p>You can define the order of the factor levels with the <code>level</code> argument of the <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> function.</p>
<p>For example, the first factor level is used as the baseline in some statistical operations, e.g.&nbsp;<code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code>, in which case the “control” level should be first.</p>
<p>Many plotting functions order categorical axes’ labels using the level order.</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-8_447a8dd9fc7a2e9af8c72f54d029393b">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"case"</span>, <span class="st">"control"</span>, <span class="st">"control"</span>, <span class="st">"case"</span>, <span class="st">"control"</span><span class="op">)</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"case"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] case    control control case    control
Levels: control case</code></pre>
</div>
</div>
<p>The <code>levels</code> argument can include values not present in the input data vector. This may be used for example when some known categories are not present in your sample, but may be added in the future, or you want specifically to show they are absent in a table or a plot, etc.</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-9_6ddd09edcce84c75dc843fe59971bcf5">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Type I"</span>, <span class="st">"Type III"</span>, <span class="st">"Type III"</span>, <span class="st">"Type I"</span><span class="op">)</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Type I"</span>, <span class="st">"Type II"</span>, <span class="st">"Type III"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Type I   Type III Type III Type I  
Levels: Type I Type II Type III</code></pre>
</div>
</div>
<p>On the other hand, if the <code>levels</code> argument is specified and does not include one or more of the values present in the input data vector, the corresponding elements become <code>NA</code>:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-10_041f4367ed674744946ae087e5d01267">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"case"</span>, <span class="st">"control"</span>, <span class="st">"undefined"</span>, <span class="st">"control"</span>, </span>
<span>              <span class="st">"case"</span>, <span class="st">"control"</span>, <span class="st">"undefined"</span><span class="op">)</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"control"</span>, <span class="st">"case"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">g</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] case    control &lt;NA&gt;    control case    control &lt;NA&gt;   
Levels: control case</code></pre>
</div>
</div>
</section><section id="define-level-labels" class="level3" data-number="9.1.3"><h3 data-number="9.1.3" class="anchored" data-anchor-id="define-level-labels">
<span class="header-section-number">9.1.3</span> Define level labels</h3>
<p>You can define level names or <strong><em>labels</em></strong> other than the values in the input vector using the <code>labels</code> argument:</p>
<p>Assume you started with the following character vector:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-11_9772a2264a01e1864628a97af4062f38">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"female"</span>, <span class="st">"female"</span>, <span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"male"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can attach different labels to each level rather than default to “female” and “male” by passing a character vector to the <code>labels</code> arguments:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-12_0ab07782de77bd82f226cf2a8feb625f">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] F F M F M
Levels: F M</code></pre>
</div>
</div>
<p>The order of names in the <code>labels</code> argument must match the order of levels. In the above example, the levels default to <code>c("female", "male")</code> because they are sorted alphabeticaly if not specified. Otherwise, we can specify both the <code>levels</code> and <code>labels</code> arguments to define both order of levels and provide new labels:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-13_262f28d872d2327013db262592dca9e0">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x</span>, </span>
<span>             levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span>,</span>
<span>             labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] F F M F M
Levels: M F</code></pre>
</div>
</div>
</section><section id="change-level-labels-of-existing-factor" class="level3" data-number="9.1.4"><h3 data-number="9.1.4" class="anchored" data-anchor-id="change-level-labels-of-existing-factor">
<span class="header-section-number">9.1.4</span> Change level labels of existing factor</h3>
<p>We can change the labels of a factor object</p>
<ul>
<li>using the <code>labels</code> argument of the <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> command in the same way we create a factor from a character or other vector</li>
<li>using the <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> command</li>
</ul>
<p>Start with a factor of two groups and change labels using the <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> command:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-14_e6b9f557097382fc6d13ba6884a7fd6b">
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"GroupA"</span>, <span class="st">"GroupB"</span>, <span class="st">"GroupB"</span>, <span class="st">"GroupA"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] GroupA GroupB GroupB GroupA
Levels: GroupA GroupB</code></pre>
</div>
</div>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-15_f10062300e448e07b38f86f1c8acffc5">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">xf</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] A B B A
Levels: A B</code></pre>
</div>
</div>
<p>Start with the same factor and change labels using the <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> command.</p>
<p>This is similar to using <code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code> on a data.frame and is much faster than using <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> as above:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-16_acf1672f6a04f5d6ed95937003c84467">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"GroupA"</span>, <span class="st">"GroupB"</span>, <span class="st">"GroupB"</span>, <span class="st">"GroupA"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">xf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span></span>
<span><span class="va">xf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] A B B A
Levels: A B</code></pre>
</div>
</div>
<div class="cell" type="rmdcaution" data-hash="Factors_cache/html/unnamed-chunk-17_242b31b5d2cc9bf8e39bb9226d171a34">
<div class="rmdcaution">
<p>
The <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> command changes the <strong><em>names</em></strong> of the levels. It <strong><em>cannot be used to change the order of levels</em></strong>, which must be done using <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>
</p>
</div>
</div>
</section></section><section id="factors-advanced" class="level2" data-number="9.2"><h2 data-number="9.2" class="anchored" data-anchor-id="factors-advanced">
<span class="header-section-number">9.2</span> Factors (advanced)</h2>
<div class="cell" type="rmdnote" data-hash="Factors_cache/html/unnamed-chunk-18_ee17d58c3e8f3b9a7dc6a9e4f53af7ff">
<div class="rmdnote">
<p>
A factor is a vector A factor contains three crucial pieces of information:
</p>
<ol style="list-style-type: decimal">
<li>
<p>
The underlying <strong>integer vector</strong>
</p>
</li>
<li>
<p>
The <strong>mapping of integers to labels</strong>
</p>
</li>
<li>
<p>
Whether the factor is <strong>ordered</strong>
</p>
</li>
</ol>
</div>
</div>
<p>Let’s unpack these.</p>
<p>Begin with a simple factor:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-19_f954cbf3d88b65bb5786045c3af66ac2">
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"female"</span>, <span class="st">"female"</span>, <span class="st">"female"</span>, <span class="st">"male"</span>, <span class="st">"male"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] female female female male   male  
Levels: female male</code></pre>
</div>
</div>
<p>Internally, the command sees there are two distinct labels, female and male, and defaults to assigning integer numbers alphabetically, in this case female has been mapped to ‘1’ and male to ‘2’.</p>
<p>Printing a factor prints the vector of labels followed by the levels, i.e.&nbsp;the unique labels.</p>
<section id="the-underlying-integer-vector" class="level3" data-number="9.2.1"><h3 data-number="9.2.1" class="anchored" data-anchor-id="the-underlying-integer-vector">
<span class="header-section-number">9.2.1</span> The underlying <strong>integer vector</strong>
</h3>
<p>Each level is assigned an integer. (Internally, this is the “data” that forms the elements of a factor vector). You don’t see these integers unless you convert the factor to numeric (<code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>) or look at the (truncated) output of <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code></p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-20_a8be4cbcdadbec21d2c8cea5c3fd2924">
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 1 2 2</code></pre>
</div>
</div>
</section><section id="the-mapping-of-integers-to-labels" class="level3" data-number="9.2.2"><h3 data-number="9.2.2" class="anchored" data-anchor-id="the-mapping-of-integers-to-labels">
<span class="header-section-number">9.2.2</span> The <strong>mapping of integers to labels</strong>
</h3>
<p>This defines which integer is mapped to which label, i.e.&nbsp;whether 1 is mapped to male or female. You can store the same information regardless which one you choose to call 1 and 2.</p>
<p>To get the mapping you can use <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code>. It prints the labels in order:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-21_111e91709a47e013b19ac6b390a80bce">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "female" "male"  </code></pre>
</div>
</div>
<p>Again, this means that female is mapped to 1 and male is mapped to 2.</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-22_c305b39e9a9a7245ee0fc788dd96fd9e">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 2 levels "female","male": 1 1 1 2 2</code></pre>
</div>
</div>
<p>The above tells you that x is a factor,<br>
it has two levels labeled as “female” and “male”, in that order, i.e.&nbsp;female is level 1 and male is level 2.<br>
The last part shows that the first five elements (in this case the whole vector) consists of three elements of level 1 (female) followed by 2 elements of level 2 (male)</p>
<section id="setting-new-level-labels" class="level4" data-number="9.2.2.1"><h4 data-number="9.2.2.1" class="anchored" data-anchor-id="setting-new-level-labels">
<span class="header-section-number">9.2.2.1</span> Setting new level labels</h4>
<p>You can use the <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> command with an assignment to assign new labels to a factor (same syntax to how you use <code><a href="https://rdrr.io/r/base/colnames.html">rownames()</a></code> or <code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code> to assign new row or column names to a matrix or data frame)</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-23_574c89ec0ba0b6c37f7734e4abc0d70b">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">xf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"patient_status_positive"</span>, <span class="st">"patient_status_negative"</span><span class="op">)</span>, <span class="fl">10</span>, <span class="cn">T</span><span class="op">)</span>,</span>
<span>             levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"patient_status_positive"</span>, <span class="st">"patient_status_negative"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">xf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] patient_status_negative patient_status_negative patient_status_negative
 [4] patient_status_negative patient_status_negative patient_status_negative
 [7] patient_status_negative patient_status_positive patient_status_negative
[10] patient_status_negative
Levels: patient_status_positive patient_status_negative</code></pre>
</div>
</div>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-24_a3a41655c8318ce41a956aa8064bd8c0">
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">xf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "patient_status_positive" "patient_status_negative"</code></pre>
</div>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">xf</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"positive"</span>, <span class="st">"negative"</span><span class="op">)</span></span>
<span><span class="va">xf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] negative negative negative negative negative negative negative positive
 [9] negative negative
Levels: positive negative</code></pre>
</div>
</div>
</section><section id="defining-the-mapping-of-labels-to-integers" class="level4" data-number="9.2.2.2"><h4 data-number="9.2.2.2" class="anchored" data-anchor-id="defining-the-mapping-of-labels-to-integers">
<span class="header-section-number">9.2.2.2</span> Defining the mapping of labels to integers</h4>
<p>If you want to define the mapping of labels to their integer representation (and not default to them sorted alphabeticaly), you use the <code>levels</code> arguments of the <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> function.</p>
<p>The vector passed to the <code>levels</code> arguments must include at least all unique values passed to <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>, otherwise you will get <code>NA</code> values</p>
<p>Without defining <code>levels</code> they are assigned alphabeticaly:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-25_234225e867163b78f9aff8b4085e5cfc">
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"alpha"</span>, <span class="st">"gamma"</span>, <span class="st">"delta"</span>, <span class="st">"delta"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] alpha alpha gamma delta delta
Levels: alpha delta gamma</code></pre>
</div>
</div>
<p>Define <code>levels</code>:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-26_32fa649732d94c5c103569ed1044f7d0">
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"alpha"</span>, <span class="st">"gamma"</span>, <span class="st">"delta"</span>, <span class="st">"delta"</span><span class="op">)</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"gamma"</span>, <span class="st">"delta"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] alpha alpha gamma delta delta
Levels: alpha gamma delta</code></pre>
</div>
</div>
<p>The <code>table</code> command has a number of useful applications, in it simplest form, it tabulates number of elements with each unique value found in a vector:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-27_e3965cf782fe44be21816d3770252f1f">
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>x
alpha gamma delta 
    2     1     2 </code></pre>
</div>
</div>
<p>If you forget (or choose to exclude) a level, all occurences are replaced by <code>NA</code>:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-28_5f2cd50a563289316c61c264e8d4a2c6">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"alpha"</span>, <span class="st">"gamma"</span>, <span class="st">"delta"</span>, <span class="st">"delta"</span><span class="op">)</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"gamma"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] alpha alpha gamma &lt;NA&gt;  &lt;NA&gt; 
Levels: alpha gamma</code></pre>
</div>
</div>
<p>If you know that more levels exist, even if no examples are present in your sample, you can includes these extra levels:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-29_202700e6aa29828533c5750eba133269">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"alpha"</span>, <span class="st">"gamma"</span>, <span class="st">"delta"</span>, <span class="st">"delta"</span><span class="op">)</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"beta"</span>, <span class="st">"gamma"</span>, <span class="st">"delta"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] alpha alpha gamma delta delta
Levels: alpha beta gamma delta</code></pre>
</div>
</div>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-30_6913714195e29b039c48073dbeef120e">
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>x
alpha  beta gamma delta 
    2     0     1     2 </code></pre>
</div>
</div>
</section></section><section id="is-the-factor-ordered" class="level3" data-number="9.2.3"><h3 data-number="9.2.3" class="anchored" data-anchor-id="is-the-factor-ordered">
<span class="header-section-number">9.2.3</span> Is the factor <strong>ordered</strong>
</h3>
<p>We looked at how you can define the order of levels using the <code>levels</code> argument in <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>, which affects the integer mapping to each label.</p>
<p>This can affect how some applications treat the different levels.</p>
<p>On top of the order of the mapping, you can further define if there is a <em>quantitative relationship</em> among levels of the form <code>level 1 &lt; level 2 &lt; ... &lt; level n</code>. This, in turn, can affect how the factor is treated by some functions, like some functions that fit statistical models.</p>
<div class="cell" type="rmdnote" data-hash="Factors_cache/html/unnamed-chunk-31_f57b619a007748d5e4fa8b224568ada8">
<div class="rmdnote">
<p>
All factors’ levels appear in some order or other.
</p>
<p>
An <strong>ordered factor</strong> indicates that its levels have a quantitative relationship of the form <code>level 1 &lt; level 2 &lt; … &lt; level n</code>.
</p>
</div>
</div>
<p>First an unordered factor:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-32_573af1d26fa9c738d17305fa4300f5f7">
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"medium"</span>, <span class="st">"large"</span><span class="op">)</span>, <span class="fl">10</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] small  large  small  medium large  small  medium medium large  medium
Levels: large medium small</code></pre>
</div>
</div>
<p>To make the above into an ordered factor, we need to define the order of the levels with the <code>levels</code> arguments and also specify that it is ordered with the <code>ordered</code> argument:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-33_7582a5a87a0937da8d912854aacc1208">
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">dat</span>,</span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"small"</span>, <span class="st">"medium"</span>, <span class="st">"large"</span><span class="op">)</span>,</span>
<span>            ordered <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] small  large  small  medium large  small  medium medium large  medium
Levels: small &lt; medium &lt; large</code></pre>
</div>
</div>
<p>Note how the levels now include the <code>&lt;</code> sign between levels to indicate the ordering.</p>
</section><section id="change-order-of-levels-or-labels" class="level3" data-number="9.2.4"><h3 data-number="9.2.4" class="anchored" data-anchor-id="change-order-of-levels-or-labels">
<span class="header-section-number">9.2.4</span> Change order of levels or labels</h3>
<p>We’ve seen how to create a factor with defined order of levels and how to change level labels already. Because these are prone to serious accidents, let’s look at them again, together.</p>
<p><strong>To change the order of levels</strong> of an existing factor use <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-34_243893c5924c58266d5003729f3bc1a1">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"target"</span>, <span class="st">"target"</span>, <span class="st">"control"</span>, <span class="st">"control"</span>, <span class="st">"control"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] target  target  control control control
Levels: control target</code></pre>
</div>
</div>
<p>Change the order so that target is first (i.e.&nbsp;corresponds to 1:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-35_47df096c53cc1da7458f86d2b3af8605">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">x</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"target"</span>, <span class="st">"control"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] target  target  control control control
Levels: target control</code></pre>
</div>
</div>
<p><strong>To change the labels of the levels</strong> use <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code>:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-36_5861ae84b14fc55cec607d9d109ee248">
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] target  target  control control control
Levels: target control</code></pre>
</div>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hit"</span>, <span class="st">"decoy"</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] hit   hit   decoy decoy decoy
Levels: hit decoy</code></pre>
</div>
</div>
<div class="cell" type="rmdcaution" data-hash="Factors_cache/html/unnamed-chunk-37_e57768215bbc62ad12ecf574b3d3c9b3">
<div class="rmdcaution">
<p>
Changing the levels of a factor with <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> does not change the internal integer representation but changes every element’s label.
</p>
</div>
</div>
</section><section id="fatal-error-to-avoid" class="level3" data-number="9.2.5"><h3 data-number="9.2.5" class="anchored" data-anchor-id="fatal-error-to-avoid">
<span class="header-section-number">9.2.5</span> Fatal error to avoid</h3>
<p>Example scenario: You receive a dataset for classification where the outcome is a factor of 1s and 0s:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-38_f7b41ac2955971792deec6e7e20694a3">
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">outcome</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">outcome</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 0 0 0 1 0
Levels: 0 1</code></pre>
</div>
</div>
<p>Some classification procedures expect the first level to be the ‘positive’ outcome, so you decide to reorder the levels.</p>
<p>You mistakenly use <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> instead of <code>factor(x, levels=c(...))</code> hoping to achieve this.</p>
<p>You end up flipping all the outcome values.</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-39_cf5f9f0113b1958fa26c7522c9829bf2">
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">outcome</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"0"</span><span class="op">)</span></span>
<span><span class="va">outcome</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 1 1 1 0 1
Levels: 1 0</code></pre>
</div>
</div>
<p>All zeros became ones and ones became zeros.</p>
<p>Your model does the exact opposite of what you intended.</p>
</section><section id="factor-to-numeric" class="level3" data-number="9.2.6"><h3 data-number="9.2.6" class="anchored" data-anchor-id="factor-to-numeric">
<span class="header-section-number">9.2.6</span> Factor to numeric</h3>
<p>While it often makes sense to have factors with words for labels, they can be any character and that includes numbers (i.e.&nbsp;numbers which are treated as labels)</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-40_2ded64f9a41b19027160c4219c5a7982">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">9</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">9</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">f</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 7 7 9 3 3 9
Levels: 3 7 9</code></pre>
</div>
</div>
<p>This behaves just like any other factor with all the rules we learned above.</p>
<p>There is a very easy trap to fall into, if you ever decide to convert such a factor to numeric.</p>
<p>The first thing that usually comes to mind is to use <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>.</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-41_72ae8230f1857d6c25f6943ff1c68885">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># !don't do this!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 2 3 1 1 3</code></pre>
</div>
</div>
<p>But! We already know this will return the integer index, it will not return the labels as numbers.</p>
<p>By understanding the internal representation of the factor, i.e.&nbsp;that a factor is an integer vector indexing a set of labels, you can convert labels to numeric exactly by indexing the set of labels:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-42_f27368b0c5e80e6e5816b5e2d1d98b27">
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">[</span><span class="va">f</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "3" "7" "7" "9" "3" "3" "9"</code></pre>
</div>
</div>
<p>The above suggests that used as an index within the brackets, <code>f</code> is coerced to integer, therefore to understand the above:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-43_360206986041a20c3807661fc0e95b86">
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "3" "7" "9"</code></pre>
</div>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html">as.integer</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "3" "7" "7" "9" "3" "3" "9"</code></pre>
</div>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># same as</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">[</span><span class="va">f</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "3" "7" "7" "9" "3" "3" "9"</code></pre>
</div>
</div>
<p>A different way around this that may be less confusing is to simply convert the factor to character and then to numeric:</p>
<div class="cell" data-hash="Factors_cache/html/unnamed-chunk-44_f468231503696f2f3264e917d33f71a3">
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 7 7 9 3 3 9</code></pre>
</div>
</div>
</section></section><section id="summary" class="level2" data-number="9.3"><h2 data-number="9.3" class="anchored" data-anchor-id="summary">
<span class="header-section-number">9.3</span> Summary</h2>
<div class="cell" type="rmdnote" data-hash="Factors_cache/html/unnamed-chunk-45_768b7666d6d106fd45632615a4315e0c">
<div class="rmdnote">
<ul>
<li>
<p>
Factors in R are essentially <strong><em>integer vectors with labels</em></strong>.
</p>
</li>
<li>
<p>
A factor’s internal integer values range from 1 to the number of levels, i.e.&nbsp; categories.
</p>
</li>
<li>
<p>
Each integer corresponds to a label.
</p>
</li>
<li>
<p>
<strong>To set order of levels</strong>: <code>factor(x, levels = levels_in_desired_order)</code> to order levels
</p>
</li>
<li>
<p>
<strong>To change labels</strong>: <code>levels(x) &lt;- newlabels</code> or <code>factor(x, labels = newlabels)</code>
</p>
</li>
</ul>
</div>
</div>
<div class="cell" type="rmdnote" data-hash="Factors_cache/html/unnamed-chunk-46_27793142e164cc3bb0cae8568fb4789d">
<div class="rmdnote">
<p>
To avoid confusion, do not use numbers as level labels, if possible.
</p>
</div>
</div>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./Indexing.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Indexing</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./DataIO.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Input/Output</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
      <div class="nav-footer-center">© 2022 E.D. Gennatas</div>
  </div>
</footer>


</body></html>