<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 17 String Operations | Programming for Data Science in R</title>
<meta name="author" content="Efstathios (Stathis) D. Gennatas, MBBS AICSM PhD">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.9/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.2.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script><script src="libs/d3-3.5.6/d3.min.js"></script><link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet">
<script src="libs/profvis-0.3.6.9000/profvis.js"></script><script src="libs/profvis-0.3.6.9000/scroll.js"></script><link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet">
<script src="libs/highlight-6.2.0/highlight.js"></script><script src="libs/profvis-binding-0.3.7/profvis.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163213745-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-163213745-1');
    </script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="bootstrap.lambdamd.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Programming for Data Science in R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">PDSR</a></li>
<li><a class="" href="preface.html"><span class="header-section-number">1</span> Preface</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">2</span> Introduction</a></li>
<li><a class="" href="Rsetup.html"><span class="header-section-number">3</span> R setup, Packages &amp; Docs</a></li>
<li><a class="" href="basicops.html"><span class="header-section-number">4</span> Basic operations</a></li>
<li><a class="" href="types.html"><span class="header-section-number">5</span> Data Types</a></li>
<li><a class="" href="structures.html"><span class="header-section-number">6</span> Data Structures</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">7</span> Factors</a></li>
<li><a class="" href="indexing.html"><span class="header-section-number">8</span> Indexing - Subsetting - Slicing</a></li>
<li><a class="" href="vectorization.html"><span class="header-section-number">9</span> Vectorized Operations</a></li>
<li><a class="" href="dataio.html"><span class="header-section-number">10</span> Data Input/Output</a></li>
<li><a class="" href="controlflow.html"><span class="header-section-number">11</span> Control flow</a></li>
<li><a class="" href="loopfns.html"><span class="header-section-number">12</span> Loop Functions</a></li>
<li><a class="" href="summarize.html"><span class="header-section-number">13</span> Summarizing Data</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">14</span> Functions</a></li>
<li><a class="" href="dataframes.html"><span class="header-section-number">15</span> Working with data frames</a></li>
<li><a class="" href="datatrans.html"><span class="header-section-number">16</span> Data Transformations</a></li>
<li><a class="active" href="stringops.html"><span class="header-section-number">17</span> String Operations</a></li>
<li><a class="" href="datetime.html"><span class="header-section-number">18</span> Date and Time</a></li>
<li><a class="" href="missingdata.html"><span class="header-section-number">19</span> Handling Missing data</a></li>
<li><a class="" href="classes.html"><span class="header-section-number">20</span> Classes and Object-Oriented Programming</a></li>
<li><a class="" href="datatable.html"><span class="header-section-number">21</span> Efficient data analysis with data.table</a></li>
<li><a class="" href="basegraphics.html"><span class="header-section-number">22</span> Base Graphics</a></li>
<li><a class="" href="graphics3x.html"><span class="header-section-number">23</span> 3x Graphics</a></li>
<li><a class="" href="colors.html"><span class="header-section-number">24</span> Colors in R</a></li>
<li><a class="" href="profiling.html"><span class="header-section-number">25</span> Timing &amp; Profiling</a></li>
<li><a class="" href="optim.html"><span class="header-section-number">26</span> Optimization with optim()</a></li>
<li><a class="" href="glm.html"><span class="header-section-number">27</span> Introduction to the GLM</a></li>
<li><a class="" href="resampling.html"><span class="header-section-number">28</span> Resampling</a></li>
<li><a class="" href="supervised.html"><span class="header-section-number">29</span> Supervised Learning</a></li>
<li><a class="" href="unsupervised.html"><span class="header-section-number">30</span> Unsupervised Learning</a></li>
<li><a class="" href="git.html"><span class="header-section-number">31</span> Git &amp; GitHub: the basics</a></li>
<li><a class="" href="shell.html"><span class="header-section-number">32</span> Introduction to the system shell</a></li>
<li><a class="" href="resources.html"><span class="header-section-number">33</span> Resources</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="stringops" class="section level1" number="17">
<h1>
<span class="header-section-number">17</span> String Operations<a class="anchor" aria-label="anchor" href="#stringops"><i class="fas fa-link"></i></a>
</h1>
<div id="reminder-create---coerce---check" class="section level2" number="17.1">
<h2>
<span class="header-section-number">17.1</span> Reminder: create - coerce - check<a class="anchor" aria-label="anchor" href="#reminder-create---coerce---check"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/character.html">character()</a></code>: Initialize empty character vector</li>
<li>
<code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code>: Coerce any vector to a character vector</li>
<li>
<code><a href="https://rdrr.io/r/base/character.html">is.character()</a></code>: Check object is character</li>
</ul>
<div class="sourceCode" id="cb1024"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">character</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="va">x</span></code></pre></div>
<pre><code> [1] "" "" "" "" "" "" "" "" "" ""</code></pre>
<div class="sourceCode" id="cb1026"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">22</span>, <span class="fl">43</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span>
<span class="va">x</span></code></pre></div>
<pre><code>[1] "10" "20" "22" "43"</code></pre>
<div class="sourceCode" id="cb1028"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"PID"</span>, <span class="st">"Age"</span>, <span class="st">"Sex"</span>, <span class="st">"Handedness"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/character.html">is.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] TRUE</code></pre>
</div>
<div id="nchar-get-number-of-characters-in-element" class="section level2" number="17.2">
<h2>
<span class="header-section-number">17.2</span> <code>nchar()</code>: Get number of characters in element<a class="anchor" aria-label="anchor" href="#nchar-get-number-of-characters-in-element"><i class="fas fa-link"></i></a>
</h2>
<p><code><a href="https://rdrr.io/r/base/nchar.html">nchar()</a></code> counts the number of characters in each <strong>element</strong> of type character in a vector:</p>
<div class="sourceCode" id="cb1030"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"bb"</span>, <span class="st">"ccc"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/nchar.html">nchar</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 1 2 3</code></pre>
</div>
<div id="substr-get-substring" class="section level2" number="17.3">
<h2>
<span class="header-section-number">17.3</span> <code>substr()</code>: Get substring<a class="anchor" aria-label="anchor" href="#substr-get-substring"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb1032"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"001Emergency"</span>, <span class="st">"010Cardiology"</span>, <span class="st">"018Neurology"</span>, 
       <span class="st">"020Anesthesia"</span>, <span class="st">"021Surgery"</span>, <span class="st">"051Psychiatry"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>, start <span class="op">=</span> <span class="fl">1</span>, stop <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "001" "010" "018" "020" "021" "051"</code></pre>
<p>Neither <code>start</code> nor <code>stop</code> need to be valid character positions.<br>
For example, if you want to get all characters from the fourth one to the last one, you can specify a very large <code>stop</code></p>
<div class="sourceCode" id="cb1034"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">4</span>, <span class="fl">99</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "Emergency"  "Cardiology" "Neurology"  "Anesthesia" "Surgery"   
[6] "Psychiatry"</code></pre>
<p>If you start with too high an index, you end up with empty strings:</p>
<div class="sourceCode" id="cb1036"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">20</span>, <span class="fl">24</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "" "" "" "" "" ""</code></pre>
<p><strong>Note:</strong> <code><a href="https://rdrr.io/r/base/substr.html">substring()</a></code> is also available, with similar syntax to <code><a href="https://rdrr.io/r/base/substr.html">substr()</a></code>: (first, last) instead of (start, stop). It is available for compatibility with S (check its source code to see how it’s an alias for <code><a href="https://rdrr.io/r/base/substr.html">substr()</a></code>)</p>
</div>
<div id="strsplit-split-strings" class="section level2" number="17.4">
<h2>
<span class="header-section-number">17.4</span> <code>strsplit()</code>: Split strings<a class="anchor" aria-label="anchor" href="#strsplit-split-strings"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb1038"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"This is one sentence"</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/tstrsplit.html">strsplit</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">" "</span><span class="op">)</span></code></pre></div>
<pre><code>[[1]]
[1] "This"     "is"       "one"      "sentence"</code></pre>
<div class="sourceCode" id="cb1040"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"In the beginning, there was the command line"</span>
<span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/tstrsplit.html">strsplit</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">","</span><span class="op">)</span></code></pre></div>
<pre><code>[[1]]
[1] "In the beginning"            " there was the command line"</code></pre>
</div>
<div id="paste-concatenate-strings" class="section level2" number="17.5">
<h2>
<span class="header-section-number">17.5</span> <code>paste()</code>: Concatenate strings<a class="anchor" aria-label="anchor" href="#paste-concatenate-strings"><i class="fas fa-link"></i></a>
</h2>
<p><code><a href="https://rdrr.io/r/base/paste.html">paste()</a></code> and <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> are particularly useful commands.<br>
In it simplest form, it acts like <code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code>:</p>
<div class="sourceCode" id="cb1042"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">22</span>, <span class="fl">43</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "10" "20" "22" "43"</code></pre>
<p>Combine strings from multiple vectors, elementwise:</p>
<div class="sourceCode" id="cb1044"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">id</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"001"</span>, <span class="st">"010"</span>, <span class="st">"018"</span>, <span class="st">"020"</span>, <span class="st">"021"</span>, <span class="st">"051"</span><span class="op">)</span>
<span class="va">dept</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Emergency"</span>, <span class="st">"Cardiology"</span>, <span class="st">"Neurology"</span>,
         <span class="st">"Anesthesia"</span>, <span class="st">"Surgery"</span>, <span class="st">"Psychiatry"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">dept</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "001 Emergency"  "010 Cardiology" "018 Neurology"  "020 Anesthesia"
[5] "021 Surgery"    "051 Psychiatry"</code></pre>
<p>Use the <code>sep</code> argument to define separator:</p>
<div class="sourceCode" id="cb1046"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">dept</span>, sep <span class="op">=</span> <span class="st">"+++"</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "001+++Emergency"  "010+++Cardiology" "018+++Neurology"  "020+++Anesthesia"
[5] "021+++Surgery"    "051+++Psychiatry"</code></pre>
<p><code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> is an alias for the commonly used <code><a href="https://rdrr.io/r/base/paste.html">paste(..., sep = "")</a></code>:</p>
<div class="sourceCode" id="cb1048"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">dept</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "001Emergency"  "010Cardiology" "018Neurology"  "020Anesthesia"
[5] "021Surgery"    "051Psychiatry"</code></pre>
<p>As with other vectorized operations, value recycling can be very convenient:</p>
<div class="sourceCode" id="cb1050"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Feature_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code> [1] "Feature_1"  "Feature_2"  "Feature_3"  "Feature_4"  "Feature_5" 
 [6] "Feature_6"  "Feature_7"  "Feature_8"  "Feature_9"  "Feature_10"</code></pre>
<p>The argument <code>collapse</code> helps output a <em>single</em> character element after collapsing with some string:</p>
<div class="sourceCode" id="cb1052"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Feature_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "Feature_1, Feature_2, Feature_3, Feature_4, Feature_5, Feature_6, Feature_7, Feature_8, Feature_9, Feature_10"</code></pre>
</div>
<div id="cat-concatenate-and-print" class="section level2" number="17.6">
<h2>
<span class="header-section-number">17.6</span> <code>cat()</code>: Concatenate and <strong>print</strong><a class="anchor" aria-label="anchor" href="#cat-concatenate-and-print"><i class="fas fa-link"></i></a>
</h2>
<p><code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> concatenates strings in order to print to screen (console) or to file. It does not return any value. It is therefore useful to produce informative messages in your programs.</p>
<div class="sourceCode" id="cb1054"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sbp</span> <span class="op">&lt;-</span> <span class="fl">130</span>
<span class="va">temp</span> <span class="op">&lt;-</span> <span class="fl">98.4</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="st">"The blood pressure was"</span>, <span class="va">sbp</span>, <span class="st">"and the temperature was"</span>, <span class="va">temp</span>, <span class="st">"\n"</span><span class="op">)</span></code></pre></div>
<pre><code>The blood pressure was 130 and the temperature was 98.4 </code></pre>
</div>
<div id="string-formatting" class="section level2" number="17.7">
<h2>
<span class="header-section-number">17.7</span> String formatting<a class="anchor" aria-label="anchor" href="#string-formatting"><i class="fas fa-link"></i></a>
</h2>
<div id="change-case-with-toupper-and-tolower" class="section level3" number="17.7.1">
<h3>
<span class="header-section-number">17.7.1</span> Change case with <code>toupper()</code> and <code>tolower()</code><a class="anchor" aria-label="anchor" href="#change-case-with-toupper-and-tolower"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1056"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">features</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"sbp"</span>, <span class="st">"dbp"</span>, <span class="st">"hct"</span>, <span class="st">"urea"</span>, <span class="st">"creatinine"</span><span class="op">)</span>
<span class="va">features</span></code></pre></div>
<pre><code>[1] "id"         "age"        "sex"        "sbp"        "dbp"       
[6] "hct"        "urea"       "creatinine"</code></pre>
<div class="sourceCode" id="cb1058"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">features</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "ID"         "AGE"        "SEX"        "SBP"        "DBP"       
[6] "HCT"        "UREA"       "CREATININE"</code></pre>
<div class="sourceCode" id="cb1060"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span><span class="op">(</span><span class="va">features</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "id"         "age"        "sex"        "sbp"        "dbp"       
[6] "hct"        "urea"       "creatinine"</code></pre>
</div>
<div id="abbreviate" class="section level3" number="17.7.2">
<h3>
<span class="header-section-number">17.7.2</span> <code>abbreviate()</code><a class="anchor" aria-label="anchor" href="#abbreviate"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1062"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Emergency"</span>, <span class="st">"Cardiology"</span>, <span class="st">"Surgery"</span>, <span class="st">"Anesthesia"</span>, <span class="st">"Neurology"</span>, <span class="st">"Psychiatry"</span>, <span class="st">"Clinical Psychology"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/abbreviate.html">abbreviate</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>          Emergency          Cardiology             Surgery          Anesthesia 
             "Emrg"              "Crdl"              "Srgr"              "Anst" 
          Neurology          Psychiatry Clinical Psychology 
             "Nrlg"              "Psyc"              "ClnP" </code></pre>
<div class="sourceCode" id="cb1064"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/abbreviate.html">abbreviate</a></span><span class="op">(</span><span class="va">x</span>, minlength <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>          Emergency          Cardiology             Surgery          Anesthesia 
              "Emr"               "Crd"               "Srg"               "Ans" 
          Neurology          Psychiatry Clinical Psychology 
              "Nrl"               "Psy"               "ClP" </code></pre>
</div>
</div>
<div id="pattern-matching" class="section level2" number="17.8">
<h2>
<span class="header-section-number">17.8</span> Pattern matching<a class="anchor" aria-label="anchor" href="#pattern-matching"><i class="fas fa-link"></i></a>
</h2>
<p>A very common task in programming is to find +/- replace string patterns in a vector of strings.<br><code><a href="https://rdrr.io/r/base/grep.html">grep()</a></code> and <code><a href="https://rdrr.io/r/base/grep.html">grepl()</a></code> help find strings that contain a given pattern.<br><code><a href="https://rdrr.io/r/base/grep.html">sub()</a></code> and <code><a href="https://rdrr.io/r/base/grep.html">gsub()</a></code> help find and replace strings.</p>
<div id="grep-get-an-integer-index-of-elements-that-include-a-pattern" class="section level3" number="17.8.1">
<h3>
<span class="header-section-number">17.8.1</span> <code>grep()</code>: Get an integer index of elements that include a pattern<a class="anchor" aria-label="anchor" href="#grep-get-an-integer-index-of-elements-that-include-a-pattern"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1066"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"001Age"</span>, <span class="st">"002Sex"</span>, <span class="st">"010Temp"</span>, <span class="st">"014SBP"</span>, <span class="st">"018Hct"</span>, <span class="st">"022PFratio"</span>, <span class="st">"030GCS"</span>, <span class="st">"112SBP-DBP"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"SBP"</span>, x <span class="op">=</span> <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 4 8</code></pre>
<p><code><a href="https://rdrr.io/r/base/grep.html">grep()</a></code>’s <code>value</code> arguments which defaults to <code>FALSE</code>, allows returning the matched string itself (the value of the element) instead of its integer index:</p>
<div class="sourceCode" id="cb1068"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"SBP"</span>, <span class="va">x</span>, value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "014SBP"     "112SBP-DBP"</code></pre>
</div>
<div id="grepl-get-a-logical-index-of-elements-that-include-a-pattern" class="section level3" number="17.8.2">
<h3>
<span class="header-section-number">17.8.2</span> <code>grepl()</code>: Get a logical index of elements that include a pattern<a class="anchor" aria-label="anchor" href="#grepl-get-a-logical-index-of-elements-that-include-a-pattern"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://rdrr.io/r/base/grep.html">grepl()</a></code> is similar to <code><a href="https://rdrr.io/r/base/grep.html">grep()</a></code>, but returns a logical index instead:</p>
<div class="sourceCode" id="cb1070"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="st">"SBP"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE</code></pre>
</div>
<div id="sub-find-replace-first-match-of-a-pattern" class="section level3" number="17.8.3">
<h3>
<span class="header-section-number">17.8.3</span> <code>sub()</code>: Find replace <strong>first</strong> match of a pattern<a class="anchor" aria-label="anchor" href="#sub-find-replace-first-match-of-a-pattern"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1072"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"The most important variable was PF ratio. Other significant variables are listed in the supplementary information."</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">sub</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"variable"</span>, replacement <span class="op">=</span> <span class="st">"feature"</span>, x <span class="op">=</span> <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "The most important feature was PF ratio. Other significant variables are listed in the supplementary information."</code></pre>
<p>“First match” refers to each element of a character vector:</p>
<div class="sourceCode" id="cb1074"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"var 1, var 2"</span>, <span class="st">"var 3, var 4"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">sub</a></span><span class="op">(</span><span class="st">"var"</span>, <span class="st">"feat"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "feat 1, var 2" "feat 3, var 4"</code></pre>
</div>
<div id="gsub-find-and-replace-all-matches-of-a-pattern" class="section level3" number="17.8.4">
<h3>
<span class="header-section-number">17.8.4</span> <code>gsub()</code>: Find and replace <strong>all</strong> matches of a pattern<a class="anchor" aria-label="anchor" href="#gsub-find-and-replace-all-matches-of-a-pattern"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1076"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"The most important variable was PF ratio. Other significant variables are listed in the supplementary information."</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"variable"</span>, replacement <span class="op">=</span> <span class="st">"feature"</span>, x <span class="op">=</span> <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "The most important feature was PF ratio. Other significant features are listed in the supplementary information."</code></pre>
<p>“All matches” means all matches across all elements:</p>
<div class="sourceCode" id="cb1078"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"var 1, var 2"</span>, <span class="st">"var 3, var 4"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"var"</span>, <span class="st">"feat"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "feat 1, feat 2" "feat 3, feat 4"</code></pre>
</div>
</div>
<div id="regular-expressions" class="section level2" number="17.9">
<h2>
<span class="header-section-number">17.9</span> Regular expressions<a class="anchor" aria-label="anchor" href="#regular-expressions"><i class="fas fa-link"></i></a>
</h2>
<p>Regular expressions allow you to perform flexible pattern matching. For example, you can look for a pattern specifically at the beginning or the end of a word, or for a variable pattern with certain characteristics.<br>
Regular expressions are very powerful and heavily used. They exist in multiple programming languages - with many similarities and a few differences.<br>
There are many rules in defining regular expression. You can read the R manual by typing <code><a href="https://rdrr.io/r/base/regex.html">?base::regex</a></code>.<br>
Here are some of the most important rules:</p>
<div id="match-a-pattern-at-the-beginning-of-a-linestring-with" class="section level3" number="17.9.1">
<h3>
<span class="header-section-number">17.9.1</span> Match a pattern at the beginning of a line/string with <code>^</code>/<code>\\&lt;</code>:<a class="anchor" aria-label="anchor" href="#match-a-pattern-at-the-beginning-of-a-linestring-with"><i class="fas fa-link"></i></a>
</h3>
<p>Use the caret sign <code><a href="https://rdrr.io/r/base/Arithmetic.html">^</a></code> in the <strong>beginning</strong> of a pattern to only match strings that begin with this pattern.<br>
pattern <code>012</code> matches both 2nd and 3rd elements:</p>
<div class="sourceCode" id="cb1080"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"001xyz993"</span>, <span class="st">"012qwe764"</span>, <span class="st">"029aqw012"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "001xyz993" "012qwe764" "029aqw012"</code></pre>
<div class="sourceCode" id="cb1082"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"012"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 2 3</code></pre>
<p>By adding <code><a href="https://rdrr.io/r/base/Arithmetic.html">^</a></code> or <code>\\&lt;</code>, only the 2nd element matches:</p>
<div class="sourceCode" id="cb1084"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"^012"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="sourceCode" id="cb1086"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"\\&lt;012"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 2</code></pre>
</div>
<div id="match-a-pattern-at-the-end-of-a-linestring-with" class="section level3" number="17.9.2">
<h3>
<span class="header-section-number">17.9.2</span> Match a pattern at the end of a line/string with <code>$</code>/<code>\\&gt;</code><a class="anchor" aria-label="anchor" href="#match-a-pattern-at-the-end-of-a-linestring-with"><i class="fas fa-link"></i></a>
</h3>
<p>The dollar sign <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> is used at the <strong>end</strong> of a pattern to only match strings which end with this pattern:</p>
<div class="sourceCode" id="cb1088"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span></code></pre></div>
<pre><code>[1] "001xyz993" "012qwe764" "029aqw012"</code></pre>
<div class="sourceCode" id="cb1090"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"012$"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb1092"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"012\\&gt;"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb1094"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1one"</span>, <span class="st">"2one"</span>, <span class="st">"3two"</span>, <span class="st">"3three"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"one$"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 1 2</code></pre>
<div class="sourceCode" id="cb1096"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"one\\&gt;"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 1 2</code></pre>
</div>
<div id="match-any-character" class="section level3" number="17.9.3">
<h3>
<span class="header-section-number">17.9.3</span> <code>.</code>: Match any character<a class="anchor" aria-label="anchor" href="#match-any-character"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1098"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"e.X"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"eX"</span>, <span class="st">"enX"</span>, <span class="st">"ennX"</span>, <span class="st">"ennnX"</span>, <span class="st">"ennnnX"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 2</code></pre>
</div>
<div id="match-preceding-character-one-or-more-times" class="section level3" number="17.9.4">
<h3>
<span class="header-section-number">17.9.4</span> <code>+</code>: Match preceding character one or more times:<a class="anchor" aria-label="anchor" href="#match-preceding-character-one-or-more-times"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"en+X"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"eX"</span>, <span class="st">"enX"</span>, <span class="st">"ennX"</span>, <span class="st">"ennnX"</span>, <span class="st">"ennnnX"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 2 3 4 5</code></pre>
</div>
<div id="n-match-preceding-character-n-times" class="section level3" number="17.9.5">
<h3>
<span class="header-section-number">17.9.5</span> <code>{n}</code>: Match preceding character <code>n</code> times:<a class="anchor" aria-label="anchor" href="#n-match-preceding-character-n-times"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"en{2}X"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"eX"</span>, <span class="st">"enX"</span>, <span class="st">"ennX"</span>, <span class="st">"ennnX"</span>, <span class="st">"ennnnX"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
</div>
<div id="n-match-preceding-character-n-or-more-times" class="section level3" number="17.9.6">
<h3>
<span class="header-section-number">17.9.6</span> <code>{n,}</code>: Match preceding character <code>n</code> or more times:<a class="anchor" aria-label="anchor" href="#n-match-preceding-character-n-or-more-times"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"en{2,}X"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"eX"</span>, <span class="st">"enX"</span>, <span class="st">"ennX"</span>, <span class="st">"ennnX"</span>, <span class="st">"ennnnX"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 3 4 5</code></pre>
</div>
<div id="nm-match-preceding-character-at-least-n-times-and-no-more-than-m-times" class="section level3" number="17.9.7">
<h3>
<span class="header-section-number">17.9.7</span> <code>{n,m}</code>: Match preceding character at least <code>n</code> times and no more than <code>m</code> times:<a class="anchor" aria-label="anchor" href="#nm-match-preceding-character-at-least-n-times-and-no-more-than-m-times"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb1106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"en{2,3}X"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"eX"</span>, <span class="st">"enX"</span>, <span class="st">"ennX"</span>, <span class="st">"ennnX"</span>, <span class="st">"ennnnX"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 3 4</code></pre>
</div>
<div id="escaping-metacharacters" class="section level3" number="17.9.8">
<h3>
<span class="header-section-number">17.9.8</span> Escaping metacharacters<a class="anchor" aria-label="anchor" href="#escaping-metacharacters"><i class="fas fa-link"></i></a>
</h3>
<p>The following are defined as metacharacters, because they have special meaning within a regular expression: <code>. \ | ( ) [ { ^ $ * + ?</code>.<br>
If you want to match one of these characters itself, you must “escape” it using a double backslash:</p>
<div class="sourceCode" id="cb1108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dn3ONE"</span>, <span class="st">"d.3TWO"</span>, <span class="st">"dx3FIVE"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"d\\.3"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 2</code></pre>
</div>
<div id="match-a-character-class" class="section level3" number="17.9.9">
<h3>
<span class="header-section-number">17.9.9</span> Match a character class<a class="anchor" aria-label="anchor" href="#match-a-character-class"><i class="fas fa-link"></i></a>
</h3>
<p>You can use brackets, <code>[ ]</code> to define sets of characters to match in any order, if present.<br>
Here we want to replace <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> and <code><a href="https://rdrr.io/r/base/slotOp.html">@</a></code> with an underscore:</p>
<div class="sourceCode" id="cb1110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Feat1$alpha"</span>, <span class="st">"Feat2$gamma"</span>, <span class="st">"Feat9@field2"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"[$@]"</span>, <span class="st">"_"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "Feat1_alpha"  "Feat2_gamma"  "Feat9_field2"</code></pre>
<p>A number of character classes are predefined. They are themselves surrounded by brackets - to use them as a character class, you need a seconds set of brackets around them. Some of the most common ones include:</p>
<ul>
<li>
<code>[:alnum:]</code>: alphanumeric, i.e. all letters and numbers</li>
<li>
<code>[:alpha:]</code>: all letters</li>
<li>
<code>[:digit:]</code>: all numbers</li>
<li>
<code>[:lower:]</code>: all lowercase letters</li>
<li>
<code>[:upper:]</code>: all uppercase letters</li>
<li>
<code>[:punct:]</code>: all punctuation characters (! " # $ % &amp; ’ ( ) * + , - . / : ; &lt; = &gt; ? @ [  ] ^ _ ` { | } ~.)</li>
<li>
<code>[:blank:]</code>: all spaces and tabs</li>
<li>
<code>[:space:]</code>: all spaces, tabs, newline characters, and some more</li>
</ul>
<p>Let’s look at some examples.<br>
Here we us <code>[:digit:]</code> to remove all numbers:</p>
<div class="sourceCode" id="cb1112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"001Emergency"</span>, <span class="st">"010Cardiology"</span>, <span class="st">"018Neurology"</span>, <span class="st">"020Anesthesia"</span>, 
       <span class="st">"021Surgery"</span>, <span class="st">"051Psychiatry"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"[[:digit:]]"</span>, <span class="st">""</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "Emergency"  "Cardiology" "Neurology"  "Anesthesia" "Surgery"   
[6] "Psychiatry"</code></pre>
<p>We can use <code>[:alpha:]</code> to remove all letters:</p>
<div class="sourceCode" id="cb1114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"[[:alpha:]]"</span>, <span class="st">""</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "001" "010" "018" "020" "021" "051"</code></pre>
<p>We can use a caret <code><a href="https://rdrr.io/r/base/Arithmetic.html">^</a></code> in the beginning of a character class to match any character <em>not</em> in the character set:</p>
<div class="sourceCode" id="cb1116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"001$Emergency"</span>, <span class="st">"010@Cardiology"</span>, <span class="st">"018*Neurology"</span>, <span class="st">"020!Anesthesia"</span>, 
       <span class="st">"021!Surgery"</span>, <span class="st">"051*Psychiatry"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"[^[:alnum:]]"</span>, <span class="st">"_"</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "001_Emergency"  "010_Cardiology" "018_Neurology"  "020_Anesthesia"
[5] "021_Surgery"    "051_Psychiatry"</code></pre>
</div>
<div id="combine-character-classes" class="section level3" number="17.9.10">
<h3>
<span class="header-section-number">17.9.10</span> Combine character classes<a class="anchor" aria-label="anchor" href="#combine-character-classes"><i class="fas fa-link"></i></a>
</h3>
<p>Use <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code> to match from multiple character classes:</p>
<div class="sourceCode" id="cb1118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"123#$%alphaBeta"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"[[:digit:]|[:punct:]]"</span>, <span class="st">""</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "alphaBeta"</code></pre>
<div class="rmdinfo">
<p>
For more information on regular expressions, start by reading the built-in documentation: <code><a href="https://rdrr.io/r/base/regex.html">?regex</a></code>
</p>
</div>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="datatrans.html"><span class="header-section-number">16</span> Data Transformations</a></div>
<div class="next"><a href="datetime.html"><span class="header-section-number">18</span> Date and Time</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#stringops"><span class="header-section-number">17</span> String Operations</a></li>
<li><a class="nav-link" href="#reminder-create---coerce---check"><span class="header-section-number">17.1</span> Reminder: create - coerce - check</a></li>
<li><a class="nav-link" href="#nchar-get-number-of-characters-in-element"><span class="header-section-number">17.2</span> nchar(): Get number of characters in element</a></li>
<li><a class="nav-link" href="#substr-get-substring"><span class="header-section-number">17.3</span> substr(): Get substring</a></li>
<li><a class="nav-link" href="#strsplit-split-strings"><span class="header-section-number">17.4</span> strsplit(): Split strings</a></li>
<li><a class="nav-link" href="#paste-concatenate-strings"><span class="header-section-number">17.5</span> paste(): Concatenate strings</a></li>
<li><a class="nav-link" href="#cat-concatenate-and-print"><span class="header-section-number">17.6</span> cat(): Concatenate and print</a></li>
<li>
<a class="nav-link" href="#string-formatting"><span class="header-section-number">17.7</span> String formatting</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#change-case-with-toupper-and-tolower"><span class="header-section-number">17.7.1</span> Change case with toupper() and tolower()</a></li>
<li><a class="nav-link" href="#abbreviate"><span class="header-section-number">17.7.2</span> abbreviate()</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#pattern-matching"><span class="header-section-number">17.8</span> Pattern matching</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#grep-get-an-integer-index-of-elements-that-include-a-pattern"><span class="header-section-number">17.8.1</span> grep(): Get an integer index of elements that include a pattern</a></li>
<li><a class="nav-link" href="#grepl-get-a-logical-index-of-elements-that-include-a-pattern"><span class="header-section-number">17.8.2</span> grepl(): Get a logical index of elements that include a pattern</a></li>
<li><a class="nav-link" href="#sub-find-replace-first-match-of-a-pattern"><span class="header-section-number">17.8.3</span> sub(): Find replace first match of a pattern</a></li>
<li><a class="nav-link" href="#gsub-find-and-replace-all-matches-of-a-pattern"><span class="header-section-number">17.8.4</span> gsub(): Find and replace all matches of a pattern</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#regular-expressions"><span class="header-section-number">17.9</span> Regular expressions</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#match-a-pattern-at-the-beginning-of-a-linestring-with"><span class="header-section-number">17.9.1</span> Match a pattern at the beginning of a line/string with ^/\\&lt;:</a></li>
<li><a class="nav-link" href="#match-a-pattern-at-the-end-of-a-linestring-with"><span class="header-section-number">17.9.2</span> Match a pattern at the end of a line/string with $/\\&gt;</a></li>
<li><a class="nav-link" href="#match-any-character"><span class="header-section-number">17.9.3</span> .: Match any character</a></li>
<li><a class="nav-link" href="#match-preceding-character-one-or-more-times"><span class="header-section-number">17.9.4</span> +: Match preceding character one or more times:</a></li>
<li><a class="nav-link" href="#n-match-preceding-character-n-times"><span class="header-section-number">17.9.5</span> {n}: Match preceding character n times:</a></li>
<li><a class="nav-link" href="#n-match-preceding-character-n-or-more-times"><span class="header-section-number">17.9.6</span> {n,}: Match preceding character n or more times:</a></li>
<li><a class="nav-link" href="#nm-match-preceding-character-at-least-n-times-and-no-more-than-m-times"><span class="header-section-number">17.9.7</span> {n,m}: Match preceding character at least n times and no more than m times:</a></li>
<li><a class="nav-link" href="#escaping-metacharacters"><span class="header-section-number">17.9.8</span> Escaping metacharacters</a></li>
<li><a class="nav-link" href="#match-a-character-class"><span class="header-section-number">17.9.9</span> Match a character class</a></li>
<li><a class="nav-link" href="#combine-character-classes"><span class="header-section-number">17.9.10</span> Combine character classes</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Programming for Data Science in R</strong>" was written by Efstathios (Stathis) D. Gennatas, MBBS AICSM PhD. It was last built on 2021-07-17.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
