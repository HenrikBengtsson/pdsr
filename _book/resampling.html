<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 28 Resampling | Programming for Data Science in R</title>
<meta name="author" content="Efstathios (Stathis) D. Gennatas, MBBS AICSM PhD">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.2"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.9/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script><script src="libs/plotly-binding-4.9.2.1/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script><script src="libs/d3-3.5.6/d3.min.js"></script><link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet">
<script src="libs/profvis-0.3.6.9000/profvis.js"></script><script src="libs/profvis-0.3.6.9000/scroll.js"></script><link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet">
<script src="libs/highlight-6.2.0/highlight.js"></script><script src="libs/profvis-binding-0.3.7/profvis.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163213745-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-163213745-1');
    </script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/mark.js@8.11.1/dist/mark.min.js"></script><!-- CSS --><link rel="stylesheet" href="bootstrap.lambdamd.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Programming for Data Science in R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">PDSR</a></li>
<li><a class="" href="preface.html"><span class="header-section-number">1</span> Preface</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">2</span> Introduction</a></li>
<li><a class="" href="Rsetup.html"><span class="header-section-number">3</span> R setup, Packages &amp; Docs</a></li>
<li><a class="" href="basicops.html"><span class="header-section-number">4</span> Basic operations</a></li>
<li><a class="" href="types.html"><span class="header-section-number">5</span> Data Types</a></li>
<li><a class="" href="structures.html"><span class="header-section-number">6</span> Data Structures</a></li>
<li><a class="" href="factors.html"><span class="header-section-number">7</span> Factors</a></li>
<li><a class="" href="indexing.html"><span class="header-section-number">8</span> Indexing - Subsetting - Slicing</a></li>
<li><a class="" href="vectorization.html"><span class="header-section-number">9</span> Vectorized Operations</a></li>
<li><a class="" href="dataio.html"><span class="header-section-number">10</span> Data Input/Output</a></li>
<li><a class="" href="controlflow.html"><span class="header-section-number">11</span> Control flow</a></li>
<li><a class="" href="loopfns.html"><span class="header-section-number">12</span> Loop Functions</a></li>
<li><a class="" href="summarize.html"><span class="header-section-number">13</span> Summarizing Data</a></li>
<li><a class="" href="functions.html"><span class="header-section-number">14</span> Functions</a></li>
<li><a class="" href="dataframes.html"><span class="header-section-number">15</span> Working with data frames</a></li>
<li><a class="" href="datatrans.html"><span class="header-section-number">16</span> Data Transformations</a></li>
<li><a class="" href="stringops.html"><span class="header-section-number">17</span> String Operations</a></li>
<li><a class="" href="datetime.html"><span class="header-section-number">18</span> Date and Time</a></li>
<li><a class="" href="missingdata.html"><span class="header-section-number">19</span> Handling Missing data</a></li>
<li><a class="" href="classes.html"><span class="header-section-number">20</span> Classes and Object-Oriented Programming</a></li>
<li><a class="" href="datatable.html"><span class="header-section-number">21</span> Efficient data analysis with data.table</a></li>
<li><a class="" href="basegraphics.html"><span class="header-section-number">22</span> Base Graphics</a></li>
<li><a class="" href="graphics3x.html"><span class="header-section-number">23</span> 3x Graphics</a></li>
<li><a class="" href="colors.html"><span class="header-section-number">24</span> Colors in R</a></li>
<li><a class="" href="profiling.html"><span class="header-section-number">25</span> Timing &amp; Profiling</a></li>
<li><a class="" href="optim.html"><span class="header-section-number">26</span> Optimization with optim()</a></li>
<li><a class="" href="glm.html"><span class="header-section-number">27</span> Introduction to the GLM</a></li>
<li><a class="active" href="resampling.html"><span class="header-section-number">28</span> Resampling</a></li>
<li><a class="" href="supervised.html"><span class="header-section-number">29</span> Supervised Learning</a></li>
<li><a class="" href="unsupervised.html"><span class="header-section-number">30</span> Unsupervised Learning</a></li>
<li><a class="" href="git.html"><span class="header-section-number">31</span> Git &amp; GitHub: the basics</a></li>
<li><a class="" href="shell.html"><span class="header-section-number">32</span> Introduction to the system shell</a></li>
<li><a class="" href="resources.html"><span class="header-section-number">33</span> Resources</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="resampling" class="section level1" number="28">
<h1>
<span class="header-section-number">28</span> Resampling<a class="anchor" aria-label="anchor" href="#resampling"><i class="fas fa-link"></i></a>
</h1>
<style type="text/css" scoped>
PRE.fansi SPAN {padding-top: .25em; padding-bottom: .25em};
</style>
<div class="sourceCode" id="cb1753"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rtemis.lambdamd.org">rtemis</a></span><span class="op">)</span></code></pre></div>
<pre><code>  .:rtemis 0.8.1: Welcome, egenn
  [x86_64-apple-darwin17.0 (64-bit): Defaulting to 4/4 available cores]
  Documentation &amp; vignettes: https://rtemis.lambdamd.org</code></pre>
<p><strong>Resampling</strong> refers to a collection of techniques for selecting cases from a sample. It is central to many machine learning algorithms and pipelines. The two core uses of resampling in predictive modeling / machinbe learning are <strong>model selection (a.k.a. tuning)</strong> and <strong>model assessment</strong>. By convention, we use the terms <strong><em>training</em></strong> and <strong><em>validation</em></strong> set when refering to model selection, and <strong><em>training</em></strong> and <strong><em>testing</em></strong> set when refering to model assessment. The terminology is unfortunately not intuitive and has led to much confusion. Some people reverse the terms, but we use the terms training, validation, and testing as they are used in the <a href="https://web.stanford.edu/~hastie/ElemStatLearn/">Elements of Statistical Learning</a> (p.Â 222, Second edition, 12th printing).</p>
<div id="model-selection-and-assessment" class="section level2" number="28.1">
<h2>
<span class="header-section-number">28.1</span> Model Selection and Assessment<a class="anchor" aria-label="anchor" href="#model-selection-and-assessment"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Model Selection</strong> aka <strong>Hyperparameter tuning</strong>
</li>
</ol>
<p>Resamples of the training set are drawn creating multiple <strong><em>training</em></strong> and <strong><em>validation</em></strong> sets. For each resample, a combination of hyperparameters is used to train a model. The mean validation-set error across resamples is calculated. The combination of hyperparameters with the minimum loss on average across validation-set resamples is selected to train the full training sample.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Model assessment</strong></li>
</ol>
<p>Resamples of the full sample are drawn, resulting into multiple training - testing sets. A model is trained on each training set and its performance assessed on the corresponding test set. Model performance is averaged across all test sets.</p>
<p><strong>Nested resampling</strong> or <strong>nested crossvalidation</strong> is the procedure where 1. and 2. are nested so that hyperparameter tuning (resampling of the training set) is performed within each of multiple training resamples and performance is tested in each corresponding test set. [elevate] performs automatic nested resampling and is one of the core supervised learning functions in <strong>rtemis</strong>.</p>
<div class="figure" style="text-align: center">
<span id="fig:kfold"></span>
<img src="kfold.png" alt="10-fold crossvalidation" width="100%"><p class="caption">
Figure 28.1: 10-fold crossvalidation
</p>
</div>
</div>
<div id="the-resample-function" class="section level2" number="28.2">
<h2>
<span class="header-section-number">28.2</span> The resample function<a class="anchor" aria-label="anchor" href="#the-resample-function"><i class="fas fa-link"></i></a>
</h2>
<p>The <code><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample()</a></code> function is responsible for all resampling in <strong>rtemis</strong>.</p>
<div class="sourceCode" id="cb1755"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>
<span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[[ Resampling Parameters ]]
    n.resamples: 10 
      resampler: strat.sub 
   stratify.var: y 
        train.p: 0.75 
   strat.n.bins: 4 

[2020-11-30 03:49:08 resample] Created 10 stratified subsamples </code></pre>
<div class="sourceCode" id="cb1757"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<pre><code>[1] "resample" "list"    </code></pre>
<p>It outputs a list which is an S3 object of class <code>resample</code>, with print and plot methods.</p>
<div class="sourceCode" id="cb1759"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span></code></pre></div>
<pre><code>.:rtemis resample object 
              N: 10 
           type: strat.sub 
        train.p: 0.75 
   strat.n.bins: 4 </code></pre>
<div class="sourceCode" id="cb1761"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="86-Resampling_files/figure-html/unnamed-chunk-3-1.png" width="768"></div>
<p>The teal-colored lines represent the training cases selected for each resample, the white are testing cases (held out).</p>
<p><code><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample()</a></code> supports 5 types of resampling:</p>
<ol style="list-style-type: decimal">
<li><strong>k-fold crossvalidation (Stratified)</strong></li>
</ol>
<p>You split the cases into k sets (folds). Each set is used once as the validation or testing set. This means each cases is left out exactly once and there is no overlap between different validation/test sets. In <strong>rtemis</strong>, the folds are also stratified by default on the outcome unless otherwise chosen. Stratification tries to maintain the full sampleâs distribution in both training and left-out sets. This is crucial for non-normally distributed continuous outcomes or <a href="#imbalanced">imbalanced datasets</a>. 10 is a common value for k, called 10-fold. Note that the size of the training and left-out sets depends on the sample size.</p>
<div class="sourceCode" id="cb1762"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res.10fold</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">10</span>, <span class="st">"kfold"</span><span class="op">)</span></code></pre></div>
<pre><code>[[ Resampling Parameters ]]
    n.resamples: 10 
      resampler: kfold 
   stratify.var: y 
   strat.n.bins: 4 

[2020-11-30 03:49:09 resample] Created 10 independent folds </code></pre>
<ol start="2" style="list-style-type: decimal">
<li><strong>Stratified subsampling</strong></li>
</ol>
<p>Draw <code>n.resamples</code> stratified samples from the data given a certain probability (<code>train.p</code>) that each case belongs to the training set. Since you are randomly sampling from the full sample each time, there will be overlap in the test set cases, but you control the training-to-testing ratio and number of resamples independently, unlike in k-fold resampling.</p>
<div class="sourceCode" id="cb1764"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res.25ss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">25</span>, <span class="st">"strat.sub"</span><span class="op">)</span></code></pre></div>
<pre><code>[[ Resampling Parameters ]]
    n.resamples: 25 
      resampler: strat.sub 
   stratify.var: y 
        train.p: 0.75 
   strat.n.bins: 4 

[2020-11-30 03:49:09 resample] Created 25 stratified subsamples </code></pre>
<ol start="3" style="list-style-type: decimal">
<li><strong>Bootstrap</strong></li>
</ol>
<p>The <a href="https://en.wikipedia.org/wiki/Bootstrapping_(statistics)">bootstrap</a>: random sampling with replacement. Since cases are replicated, you should use bootstrap as the outer resampler if you will also have inner resampling for tuning, since the same case may end up in both training and validation sets.</p>
<div class="sourceCode" id="cb1766"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res.100boot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">100</span>, <span class="st">"bootstrap"</span><span class="op">)</span></code></pre></div>
<pre><code>[[ Resampling Parameters ]]
   n.resamples: 100 
     resampler: bootstrap 

[2020-11-30 03:49:09 resample] Created 100 bootstrap resamples </code></pre>
<ol start="4" style="list-style-type: decimal">
<li><strong>Stratified Bootstrap</strong></li>
</ol>
<p>This is stratified subsampling with random replication of cases to match the length of the original sample. Same as the bootstrap, do not use if you will be further resampling each resample.</p>
<div class="sourceCode" id="cb1768"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res.100sboot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">100</span>, <span class="st">"strat.boot"</span><span class="op">)</span></code></pre></div>
<pre><code>[[ Resampling Parameters ]]
     n.resamples: 100 
       resampler: strat.boot 
    stratify.var: y 
         train.p: 0.75 
    strat.n.bins: 4 
   target.length: 500 

[2020-11-30 03:49:09 resample] Created 100 stratified bootstraps </code></pre>
<ol start="5" style="list-style-type: decimal">
<li><strong>Leave-One-Out-Crossvalidation (LOOCV)</strong></li>
</ol>
<p>This is k-fold crossvalidation where <span class="math inline">\(k = N\)</span>, where <span class="math inline">\(N\)</span> is number of data points/cases in the whole sample. It has been included for experimentation and completenes, but it is not recommended either for model selection or assessment over the other resampling methods.</p>
<div class="sourceCode" id="cb1770"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res.loocv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample</a></span><span class="op">(</span><span class="va">x</span>, resampler <span class="op">=</span> <span class="st">"loocv"</span><span class="op">)</span></code></pre></div>
<pre><code>[[ Resampling Parameters ]]
   n.resamples: 500 
     resampler: loocv 

[2020-11-30 03:49:09 resample] Created 500 independent folds (LOOCV) </code></pre>
</div>
<div id="example-stratified-vs-random-sampling-in-a-binomial-distribution" class="section level2" number="28.3">
<h2>
<span class="header-section-number">28.3</span> Example: Stratified vs random sampling in a binomial distribution<a class="anchor" aria-label="anchor" href="#example-stratified-vs-random-sampling-in-a-binomial-distribution"><i class="fas fa-link"></i></a>
</h2>
<p>Imagine <code>y</code> is the outcome of interest where events occur with a probability of .1 - a common scenario in many fields.</p>
<div class="sourceCode" id="cb1772"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html">rbinom</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1</span>, <span class="fl">.1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/rtemis/man/mplot3.x.html">mplot3.x</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<div class="inline-figure"><img src="86-Resampling_files/figure-html/unnamed-chunk-9-1.png" width="432"></div>
<div class="sourceCode" id="cb1773"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="va">prob</span> <span class="op">&lt;-</span> <span class="va">freq</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">freq</span><span class="op">)</span>
<span class="va">res.nonstrat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fl">.75</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">res.strat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rtemis/man/resample.html">resample</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>[[ Resampling Parameters ]]
    n.resamples: 10 
      resampler: strat.sub 
   stratify.var: y 
        train.p: 0.75 
   strat.n.bins: 4 
[2020-11-30 03:49:09 strat.sub] Using max n bins possible = 2 

[2020-11-30 03:49:09 resample] Created 10 stratified subsamples </code></pre>
<div class="sourceCode" id="cb1775"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">prob.nonstrat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">res.nonstrat</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
  <span class="va">freq</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">freq</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">prob.strat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">freq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">res.strat</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
  <span class="va">freq</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">freq</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">prob.nonstrat</span></code></pre></div>
<pre><code>         1          1          1          1          1          1          1 
0.09333333 0.08000000 0.08000000 0.06666667 0.06666667 0.10666667 0.10666667 
         1          1          1 
0.10666667 0.09333333 0.08000000 </code></pre>
<div class="sourceCode" id="cb1777"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">prob.nonstrat</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 0.0156505</code></pre>
<div class="sourceCode" id="cb1779"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">prob.strat</span></code></pre></div>
<pre><code>         1          1          1          1          1          1          1 
0.08108108 0.08108108 0.08108108 0.08108108 0.08108108 0.08108108 0.08108108 
         1          1          1 
0.08108108 0.08108108 0.08108108 </code></pre>
<div class="sourceCode" id="cb1781"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">prob.strat</span><span class="op">)</span></code></pre></div>
<pre><code>[1] 0</code></pre>
<p>As expected, the random sampling resulted in different event probability in each resample, whereas stratified subsampling maintained a constant probability across resamples.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="glm.html"><span class="header-section-number">27</span> Introduction to the GLM</a></div>
<div class="next"><a href="supervised.html"><span class="header-section-number">29</span> Supervised Learning</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#resampling"><span class="header-section-number">28</span> Resampling</a></li>
<li><a class="nav-link" href="#model-selection-and-assessment"><span class="header-section-number">28.1</span> Model Selection and Assessment</a></li>
<li><a class="nav-link" href="#the-resample-function"><span class="header-section-number">28.2</span> The resample function</a></li>
<li><a class="nav-link" href="#example-stratified-vs-random-sampling-in-a-binomial-distribution"><span class="header-section-number">28.3</span> Example: Stratified vs random sampling in a binomial distribution</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Programming for Data Science in R</strong>" was written by Efstathios (Stathis) D. Gennatas, MBBS AICSM PhD. It was last built on 2021-07-17.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>
</html>
