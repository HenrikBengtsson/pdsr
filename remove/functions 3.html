<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>14 Functions | Programming for Data Science in R</title>

    <meta name="author" content="Efstathios (Stathis) D. Gennatas, MBBS AICSM PhD" />
  
   <meta name="description" content="14 Functions | Programming for Data Science in R is a project to build an online resource for (Bio)statisticians / Epidemiologists / (Health) Data Scientists" />
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="14 Functions | Programming for Data Science in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="14 Functions | Programming for Data Science in R is a project to build an online resource for (Bio)statisticians / Epidemiologists / (Health) Data Scientists" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 Functions | Programming for Data Science in R" />
  
  <meta name="twitter:description" content="14 Functions | Programming for Data Science in R is a project to build an online resource for (Bio)statisticians / Epidemiologists / (Health) Data Scientists" />
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.3.1/transition.js"></script>
    <script src="libs/bs3compat-0.3.1/tabs.js"></script>
    <script src="libs/bs3compat-0.3.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
    <script src="libs/plotly-binding-4.9.4.1/plotly.js"></script>
    <script src="libs/typedarray-0.1/typedarray.min.js"></script>
    <link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
    <link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
    <script src="libs/d3-3.5.6/d3.min.js"></script>
    <link href="libs/profvis-0.3.6.9000/profvis.css" rel="stylesheet" />
    <script src="libs/profvis-0.3.6.9000/profvis.js"></script>
    <script src="libs/profvis-0.3.6.9000/scroll.js"></script>
    <link href="libs/highlight-6.2.0/textmate.css" rel="stylesheet" />
    <script src="libs/highlight-6.2.0/highlight.js"></script>
    <script src="libs/profvis-binding-0.3.7/profvis.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127457544-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-127457544-1');
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
    <link rel="stylesheet" href="bootstrap.lambdamd.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Programming for Data Science in R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<div id="functions" class="section level1" number="14">
<h1><span class="header-section-number">14</span> Functions</h1>
<p>Writing functions is a core part of programming.</p>
<p><em>When should you write a function?</em></p>
<p>Whenever you find yourself repeating pieces of code.</p>
<p><em>Why is it important?</em></p>
<p>Writing functions helps reduce the total amount of code, which increases efficiency, reduces the
chance of error, and can make code more readable.</p>
<p>Functions in R are “first-class objects”.<br />
This means they can be passed in and out of other functions or objects like any other R structure.<br />
For example, you can use a command like <code>apply(mat, 2, mean)</code></p>
<p>Functions in R are <em>for the most part</em> like mathematical functions: they have one or more inputs and
one output. The inputs are known as the function arguments. If you want to return multiple outputs,
you can return a list containing any number of R objects.</p>
<div id="simple-functions" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Simple functions</h2>
<p>Let’s start with a very simple function: single argument with no default value:</p>
<div class="sourceCode" id="cb870"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb870-1"><a href="functions.html#cb870-1" aria-hidden="true" tabindex="-1"></a>square <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb870-2"><a href="functions.html#cb870-2" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb870-3"><a href="functions.html#cb870-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb870-4"><a href="functions.html#cb870-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb870-5"><a href="functions.html#cb870-5" aria-hidden="true" tabindex="-1"></a><span class="fu">square</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>[1] 9</code></pre>
<p>Notice above that <code>x^2</code> is automatically returned by the function. It is the same as explicitly returning it with <code>return()</code>:</p>
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb872-1"><a href="functions.html#cb872-1" aria-hidden="true" tabindex="-1"></a>square <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb872-2"><a href="functions.html#cb872-2" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb872-3"><a href="functions.html#cb872-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(out)</span>
<span id="cb872-4"><a href="functions.html#cb872-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb872-5"><a href="functions.html#cb872-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb872-6"><a href="functions.html#cb872-6" aria-hidden="true" tabindex="-1"></a><span class="fu">square</span>(<span class="dv">4</span>)</span></code></pre></div>
<pre><code>[1] 16</code></pre>
<p>which is the same as:</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb874-1"><a href="functions.html#cb874-1" aria-hidden="true" tabindex="-1"></a>square <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb874-2"><a href="functions.html#cb874-2" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb874-3"><a href="functions.html#cb874-3" aria-hidden="true" tabindex="-1"></a>  out</span>
<span id="cb874-4"><a href="functions.html#cb874-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb874-5"><a href="functions.html#cb874-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb874-6"><a href="functions.html#cb874-6" aria-hidden="true" tabindex="-1"></a><span class="fu">square</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>[1] 25</code></pre>
<p>A function returns either:</p>
<ul>
<li>an object passed to <code>return()</code></li>
<li>the value of the last expression within the function definition such as <code>out</code> or <code>x^2</code> above.</li>
</ul>
<p><code>return()</code> is a way to end evaluation early:</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb876-1"><a href="functions.html#cb876-1" aria-hidden="true" tabindex="-1"></a>square.pos <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb876-2"><a href="functions.html#cb876-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb876-3"><a href="functions.html#cb876-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(x<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb876-4"><a href="functions.html#cb876-4" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb876-5"><a href="functions.html#cb876-5" aria-hidden="true" tabindex="-1"></a>    x</span>
<span id="cb876-6"><a href="functions.html#cb876-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb876-7"><a href="functions.html#cb876-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;The input was left unchanged</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb876-8"><a href="functions.html#cb876-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb876-9"><a href="functions.html#cb876-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb876-10"><a href="functions.html#cb876-10" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="sc">-</span><span class="dv">10</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span>)</span>
<span id="cb876-11"><a href="functions.html#cb876-11" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb878-1"><a href="functions.html#cb878-1" aria-hidden="true" tabindex="-1"></a><span class="fu">square.pos</span>(x)</span></code></pre></div>
<pre><code>[1] 9</code></pre>
<p>Multiple arguments, with and without defaults:</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="functions.html#cb880-1" aria-hidden="true" tabindex="-1"></a>raise <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">power =</span> <span class="dv">2</span>) {</span>
<span id="cb880-2"><a href="functions.html#cb880-2" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">^</span>power</span>
<span id="cb880-3"><a href="functions.html#cb880-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb880-4"><a href="functions.html#cb880-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb880-5"><a href="functions.html#cb880-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">10</span>, <span class="dv">1</span>)</span>
<span id="cb880-6"><a href="functions.html#cb880-6" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>[1] 6</code></pre>
<div class="sourceCode" id="cb882"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb882-1"><a href="functions.html#cb882-1" aria-hidden="true" tabindex="-1"></a><span class="fu">raise</span>(x)</span></code></pre></div>
<pre><code>[1] 36</code></pre>
<div class="sourceCode" id="cb884"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb884-1"><a href="functions.html#cb884-1" aria-hidden="true" tabindex="-1"></a><span class="fu">raise</span>(x, <span class="at">power =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>[1] 216</code></pre>
<div class="sourceCode" id="cb886"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb886-1"><a href="functions.html#cb886-1" aria-hidden="true" tabindex="-1"></a><span class="fu">raise</span>(x, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>[1] 216</code></pre>
</div>
<div id="argument-matching" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> Argument matching</h2>
<p>R will match unambiguous abbreviations of arguments:</p>
<div class="sourceCode" id="cb888"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb888-1"><a href="functions.html#cb888-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">alpha =</span> <span class="dv">2</span>, <span class="at">beta =</span> <span class="dv">3</span>, <span class="at">gamma =</span> <span class="dv">4</span>) {</span>
<span id="cb888-2"><a href="functions.html#cb888-2" aria-hidden="true" tabindex="-1"></a>  alpha <span class="sc">*</span> beta <span class="sc">+</span> gamma</span>
<span id="cb888-3"><a href="functions.html#cb888-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb888-4"><a href="functions.html#cb888-4" aria-hidden="true" tabindex="-1"></a><span class="fu">fn</span>(<span class="at">g =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>[1] 8</code></pre>
</div>
<div id="arguments-with-prescribed-set-of-allowed-values" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Arguments with prescribed set of allowed values</h2>
<p>You can match specific values for an argument using <code>match.arg()</code>:</p>
<div class="sourceCode" id="cb890"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb890-1"><a href="functions.html#cb890-1" aria-hidden="true" tabindex="-1"></a>myfn <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;alpha&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;gamma&quot;</span>)) {</span>
<span id="cb890-2"><a href="functions.html#cb890-2" aria-hidden="true" tabindex="-1"></a>  type <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(type)</span>
<span id="cb890-3"><a href="functions.html#cb890-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;You have selected type &#39;&quot;</span>, type, <span class="st">&quot;&#39;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb890-4"><a href="functions.html#cb890-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb890-5"><a href="functions.html#cb890-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb890-6"><a href="functions.html#cb890-6" aria-hidden="true" tabindex="-1"></a><span class="fu">myfn</span>(<span class="st">&quot;a&quot;</span>)</span></code></pre></div>
<pre><code>You have selected type &#39;alpha&#39;</code></pre>
<div class="sourceCode" id="cb892"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb892-1"><a href="functions.html#cb892-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myfn</span>(<span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<pre><code>You have selected type &#39;beta&#39;</code></pre>
<div class="sourceCode" id="cb894"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb894-1"><a href="functions.html#cb894-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myfn</span>(<span class="st">&quot;g&quot;</span>)</span></code></pre></div>
<pre><code>You have selected type &#39;gamma&#39;</code></pre>
<div class="sourceCode" id="cb896"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb896-1"><a href="functions.html#cb896-1" aria-hidden="true" tabindex="-1"></a><span class="fu">myfn</span>(<span class="st">&quot;d&quot;</span>)</span></code></pre></div>
<pre><code>Error in match.arg(type): &#39;arg&#39; should be one of &quot;alpha&quot;, &quot;beta&quot;, &quot;gamma&quot;</code></pre>
<p>Above you see that partial matching using <code>match.arg()</code> was able to identify a valid option, and when there was no match, an informative error was printed.</p>
<p>Partial matching is also automatically done on the argument names themselves, but it’s important to avoid depending on that.</p>
<div class="sourceCode" id="cb898"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb898-1"><a href="functions.html#cb898-1" aria-hidden="true" tabindex="-1"></a>adsr <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">attack =</span> <span class="dv">100</span>,</span>
<span id="cb898-2"><a href="functions.html#cb898-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">decay =</span> <span class="dv">250</span>,</span>
<span id="cb898-3"><a href="functions.html#cb898-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sustain =</span> <span class="dv">40</span>,</span>
<span id="cb898-4"><a href="functions.html#cb898-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">release =</span> <span class="dv">1000</span>) {</span>
<span id="cb898-5"><a href="functions.html#cb898-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Attack time:&quot;</span>, attack, <span class="st">&quot;ms</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb898-6"><a href="functions.html#cb898-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Decay time:&quot;</span>, decay, <span class="st">&quot;ms</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb898-7"><a href="functions.html#cb898-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Sustain level:&quot;</span>, sustain, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb898-8"><a href="functions.html#cb898-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;Release time:&quot;</span>, release, <span class="st">&quot;ms</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb898-9"><a href="functions.html#cb898-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb898-10"><a href="functions.html#cb898-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb898-11"><a href="functions.html#cb898-11" aria-hidden="true" tabindex="-1"></a><span class="fu">adsr</span>(<span class="dv">50</span>, <span class="at">s =</span> <span class="dv">100</span>, <span class="at">r =</span> <span class="dv">500</span>)</span></code></pre></div>
<pre><code>Attack time: 50 ms
 Decay time: 250 ms
 Sustain level: 100 
 Release time: 500 ms</code></pre>
</div>
<div id="passing-extra-arguments-to-another-function-with-the-...-argument" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> Passing extra arguments to another function with the <code>...</code> argument</h2>
<p>Many functions include a <code>...</code> argument at the end. Any arguments not otherwise matched are collected there. A common use for this is to pass them to another function:</p>
<div class="sourceCode" id="cb900"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb900-1"><a href="functions.html#cb900-1" aria-hidden="true" tabindex="-1"></a>cplot <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y,</span>
<span id="cb900-2"><a href="functions.html#cb900-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cex =</span> <span class="fl">1.5</span>,</span>
<span id="cb900-3"><a href="functions.html#cb900-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">pch =</span> <span class="dv">16</span>,</span>
<span id="cb900-4"><a href="functions.html#cb900-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col =</span> <span class="st">&quot;#18A3AC&quot;</span>,</span>
<span id="cb900-5"><a href="functions.html#cb900-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">bty =</span> <span class="st">&quot;n&quot;</span>, ...) {</span>
<span id="cb900-6"><a href="functions.html#cb900-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(x, y, <span class="at">cex =</span> cex, <span class="at">pch =</span> pch, <span class="at">col =</span> col, <span class="at">bty =</span> bty, ...)</span>
<span id="cb900-7"><a href="functions.html#cb900-7" aria-hidden="true" tabindex="-1"></a>                  }</span></code></pre></div>
<p><code>...</code> is also used for variable number of iputs, often as the first argument of a function. For example, look at the documentation of <code>c</code>, <code>cat</code>, <code>cbind</code>, <code>rbind</code>, <code>paste</code></p>
<p>Note: Any arguments after the <code>...</code>, <strong>must</strong> be named fully, i.e. will not be partially matched.</p>
</div>
<div id="return-multiple-objects" class="section level2" number="14.5">
<h2><span class="header-section-number">14.5</span> Return multiple objects</h2>
<p>R function can only return a single object. This is not much of a problem because you can simply put any collection of objects into a list and return it:</p>
<div class="sourceCode" id="cb901"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb901-1"><a href="functions.html#cb901-1" aria-hidden="true" tabindex="-1"></a>lfn <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">fn =</span> square) {</span>
<span id="cb901-2"><a href="functions.html#cb901-2" aria-hidden="true" tabindex="-1"></a>  xfn <span class="ot">&lt;-</span> <span class="fu">fn</span>(x)</span>
<span id="cb901-3"><a href="functions.html#cb901-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb901-4"><a href="functions.html#cb901-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">x =</span> x,</span>
<span id="cb901-5"><a href="functions.html#cb901-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">xfn =</span> xfn,</span>
<span id="cb901-6"><a href="functions.html#cb901-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">fn =</span> fn)</span>
<span id="cb901-7"><a href="functions.html#cb901-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb901-8"><a href="functions.html#cb901-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb901-9"><a href="functions.html#cb901-9" aria-hidden="true" tabindex="-1"></a><span class="fu">lfn</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>$x
[1] 3

$xfn
[1] 9

$fn
function(x) {
  out &lt;- x^2
  out
}
&lt;bytecode: 0x7f8522994ff0&gt;</code></pre>
</div>
<div id="warnings-and-errors" class="section level2" number="14.6">
<h2><span class="header-section-number">14.6</span> Warnings and errors</h2>
<p>You can use <code>warning("some warning message")</code> at any point inside a function to produce a warning message during execution. The message gets printed to the R console, but function execution is <strong>not</strong> stopped.</p>
<p>On the other hand, you can use <code>stop("some error message")</code> to print an error message to console and stop function execution.</p>
<p>The following function (<code>el10</code>) calculates:
<span class="math display">\[ e^{log_{10}(x)} \]</span></p>
<div class="sourceCode" id="cb903"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb903-1"><a href="functions.html#cb903-1" aria-hidden="true" tabindex="-1"></a>el10 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb903-2"><a href="functions.html#cb903-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">exp</span>(<span class="fu">log10</span>(x))</span>
<span id="cb903-3"><a href="functions.html#cb903-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>which is not defined for negative <code>x</code>. In this case, we could let R give a warning when it tries to compute <code>log10(x)</code>:</p>
<div class="sourceCode" id="cb904"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb904-1"><a href="functions.html#cb904-1" aria-hidden="true" tabindex="-1"></a>val1 <span class="ot">&lt;-</span> <span class="fu">el10</span>(<span class="sc">-</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>Warning in el10(-3): NaNs produced</code></pre>
<p>We could instead produce our own warning message:</p>
<div class="sourceCode" id="cb906"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb906-1"><a href="functions.html#cb906-1" aria-hidden="true" tabindex="-1"></a>el10 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb906-2"><a href="functions.html#cb906-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="fu">warning</span>(<span class="st">&quot;x must be positive&quot;</span>)</span>
<span id="cb906-3"><a href="functions.html#cb906-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">exp</span>(<span class="fu">log10</span>(x))</span>
<span id="cb906-4"><a href="functions.html#cb906-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb906-5"><a href="functions.html#cb906-5" aria-hidden="true" tabindex="-1"></a>val2 <span class="ot">&lt;-</span> <span class="fu">el10</span>(<span class="sc">-</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>Warning in el10(-3): x must be positive</code></pre>
<pre><code>Warning in el10(-3): NaNs produced</code></pre>
<div class="sourceCode" id="cb909"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb909-1"><a href="functions.html#cb909-1" aria-hidden="true" tabindex="-1"></a>val2</span></code></pre></div>
<pre><code>[1] NaN</code></pre>
<p>As you see, the output (<code>NaN</code>) still gets returned.</p>
<p>Alternatively, we can use <code>stop()</code> to end function execution:</p>
<div class="sourceCode" id="cb911"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb911-1"><a href="functions.html#cb911-1" aria-hidden="true" tabindex="-1"></a>el10 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb911-2"><a href="functions.html#cb911-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) <span class="fu">stop</span>(<span class="st">&quot;x must be positive&quot;</span>)</span>
<span id="cb911-3"><a href="functions.html#cb911-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">exp</span>(<span class="fu">log10</span>(x))</span>
<span id="cb911-4"><a href="functions.html#cb911-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb911-5"><a href="functions.html#cb911-5" aria-hidden="true" tabindex="-1"></a>val3 <span class="ot">&lt;-</span> <span class="fu">el10</span>(<span class="sc">-</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>Error in el10(-3): x must be positive</code></pre>
<p>Note how, in this case, function evalutation is stopped and no value is returned.</p>
</div>
<div id="scoping" class="section level2" number="14.7">
<h2><span class="header-section-number">14.7</span> Scoping</h2>
<p>Functions exist in their own environment, i.e. contain their own variable definitions.</p>
<div class="sourceCode" id="cb913"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb913-1"><a href="functions.html#cb913-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb913-2"><a href="functions.html#cb913-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb913-3"><a href="functions.html#cb913-3" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb913-4"><a href="functions.html#cb913-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="dv">10</span><span class="sc">*</span>x</span>
<span id="cb913-5"><a href="functions.html#cb913-5" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="dv">20</span><span class="sc">*</span>y</span>
<span id="cb913-6"><a href="functions.html#cb913-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;Inside the function, x = &quot;</span>, x, <span class="st">&quot; and y = &quot;</span>, y, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb913-7"><a href="functions.html#cb913-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb913-8"><a href="functions.html#cb913-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb913-9"><a href="functions.html#cb913-9" aria-hidden="true" tabindex="-1"></a><span class="fu">fn</span>(x, y)</span></code></pre></div>
<pre><code>Inside the function, x =  30  and y =  80 </code></pre>
<div class="sourceCode" id="cb915"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb915-1"><a href="functions.html#cb915-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;Outside the function, x = &quot;</span>, x, <span class="st">&quot; and y = &quot;</span>, y, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>Outside the function, x =  3  and y =  4 </code></pre>
<p>However, if a variable is referenced within a function but no local definition exists, the interpreter will look for the variable at the parent directory. It is best ensure all objects needed within a function are specified as arguments and passed appropriately when the function is called.</p>
<p>In the following example, <code>x</code> is only defined outside the function definition, but referenced within it.</p>
<div class="sourceCode" id="cb917"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb917-1"><a href="functions.html#cb917-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">21</span></span>
<span id="cb917-2"><a href="functions.html#cb917-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb917-3"><a href="functions.html#cb917-3" aria-hidden="true" tabindex="-1"></a>itfn <span class="ot">&lt;-</span> <span class="cf">function</span>(y, <span class="at">lr =</span> <span class="dv">1</span>) {</span>
<span id="cb917-4"><a href="functions.html#cb917-4" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> lr <span class="sc">*</span> y</span>
<span id="cb917-5"><a href="functions.html#cb917-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb917-6"><a href="functions.html#cb917-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb917-7"><a href="functions.html#cb917-7" aria-hidden="true" tabindex="-1"></a><span class="fu">itfn</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>[1] 24</code></pre>
<div id="function-vs.-for-loop" class="section level3" number="14.7.1">
<h3><span class="header-section-number">14.7.1</span> function vs. for loop</h3>
<p>Let’s z-score the built-in <code>mtcars</code> dataset once with a for loop and once with a custom function. This links back to the example seen earlier in the <a href="controlflow.html#fordata">for loop</a> section. In practice, this would be performed with the <code>scale()</code> command:</p>
<p>Within the for loop, we are assigning columns directly to the object initialized before the loop.
In the following example, we use <code>print(environment())</code> to print the environment outside and inside the loop function to show that it is the same. This is purely for demonstration:</p>
<div class="sourceCode" id="cb919"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb919-1"><a href="functions.html#cb919-1" aria-hidden="true" tabindex="-1"></a><span class="co"># initialize new object &#39;mtcars_z&#39;</span></span>
<span id="cb919-2"><a href="functions.html#cb919-2" aria-hidden="true" tabindex="-1"></a>mtcars_z <span class="ot">&lt;-</span> mtcars</span>
<span id="cb919-3"><a href="functions.html#cb919-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;environment outside for loop is: &quot;</span>)</span></code></pre></div>
<pre><code>environment outside for loop is: </code></pre>
<div class="sourceCode" id="cb921"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb921-1"><a href="functions.html#cb921-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">environment</span>())</span></code></pre></div>
<pre><code>&lt;environment: R_GlobalEnv&gt;</code></pre>
<div class="sourceCode" id="cb923"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb923-1"><a href="functions.html#cb923-1" aria-hidden="true" tabindex="-1"></a><span class="co"># z-score one column at a time in a for loop</span></span>
<span id="cb923-2"><a href="functions.html#cb923-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(mtcars)) {</span>
<span id="cb923-3"><a href="functions.html#cb923-3" aria-hidden="true" tabindex="-1"></a>  mtcars_z[, i] <span class="ot">&lt;-</span> (mtcars[, i] <span class="sc">-</span> <span class="fu">mean</span>(mtcars[, i])) <span class="sc">/</span> <span class="fu">sd</span>(mtcars[, i])</span>
<span id="cb923-4"><a href="functions.html#cb923-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;environment inside for loop is: &quot;</span>)</span>
<span id="cb923-5"><a href="functions.html#cb923-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">environment</span>())</span>
<span id="cb923-6"><a href="functions.html#cb923-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;
environment inside for loop is: &lt;environment: R_GlobalEnv&gt;</code></pre>
<p>In contrast, all operations remain local within a function and the output must be returned:</p>
<div class="sourceCode" id="cb925"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb925-1"><a href="functions.html#cb925-1" aria-hidden="true" tabindex="-1"></a>ztransform <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb925-2"><a href="functions.html#cb925-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;environment inside function body is: &quot;</span>)</span>
<span id="cb925-3"><a href="functions.html#cb925-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">environment</span>())</span>
<span id="cb925-4"><a href="functions.html#cb925-4" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">sapply</span>(mtcars, <span class="cf">function</span>(i) (i <span class="sc">-</span> <span class="fu">mean</span>(i))<span class="sc">/</span><span class="fu">sd</span>(i)))</span>
<span id="cb925-5"><a href="functions.html#cb925-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(z) <span class="ot">&lt;-</span> <span class="fu">rownames</span>(x)</span>
<span id="cb925-6"><a href="functions.html#cb925-6" aria-hidden="true" tabindex="-1"></a>  z</span>
<span id="cb925-7"><a href="functions.html#cb925-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb925-8"><a href="functions.html#cb925-8" aria-hidden="true" tabindex="-1"></a>mtcars_z2 <span class="ot">&lt;-</span> <span class="fu">ztransform</span>(mtcars)</span></code></pre></div>
<pre><code>environment inside function body is: &lt;environment: 0x7f851eef6780&gt;</code></pre>
<div class="sourceCode" id="cb927"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb927-1"><a href="functions.html#cb927-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;environment outside function body is: &quot;</span>)</span></code></pre></div>
<pre><code>environment outside function body is: </code></pre>
<div class="sourceCode" id="cb929"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb929-1"><a href="functions.html#cb929-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">environment</span>())</span></code></pre></div>
<pre><code>&lt;environment: R_GlobalEnv&gt;</code></pre>
<p>Notice how the environment outside and inside the loop function is the same, it is the Global environemnt, but the environment within the function is different. That is why any objects created or changed within a function must be returned if we want to make them available.</p>
</div>
</div>
<div id="pipe" class="section level2" number="14.8">
<h2><span class="header-section-number">14.8</span> The pipe operator</h2>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:FigRpipes"></span>
<img src="R_pipes.png" alt="Illustration of pipes in R" width="80%" />
<p class="caption">
Figure 14.1: Illustration of pipes in R
</p>
</div>
<p>A pipe operator was first introduced to R with the <a href="https://magrittr.tidyverse.org/">magrittr</a>
package with the <code>%&gt;%</code> symbol. Note that a number of other packages that endorse the use of pipes export the pipe operator as well.</p>
<p>Starting with R version 4.1, a native pipe operator is included in the language with the <code>|&gt;</code> symbol.</p>
<p>A pipe allows writing <code>f(x)</code> as <code>x |&gt; f()</code> (native pipe) or <code>x %&gt;% f</code> (magrittr).</p>
<p>Note that the native pipe requires parentheses, but magrittr works with or without them.</p>
<p>A pipe is often used to:</p>
<ul>
<li>avoid multiple temporary assignments in a multistep procedure, or</li>
<li>as an alternative to nesting functions.</li>
</ul>
<p>Some packages and developers promote its use, others discourage it. You should try and see if/when it suits your needs.</p>
<p>The following:</p>
<div class="sourceCode" id="cb931"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb931-1"><a href="functions.html#cb931-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">f1</span>(x)</span>
<span id="cb931-2"><a href="functions.html#cb931-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">f2</span>(x)</span>
<span id="cb931-3"><a href="functions.html#cb931-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">f3</span>(x)</span></code></pre></div>
<p>is equivalent to:</p>
<div class="sourceCode" id="cb932"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb932-1"><a href="functions.html#cb932-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">f3</span>(<span class="fu">f2</span>(<span class="fu">f1</span>(x)))</span></code></pre></div>
<p>is equivalent to:</p>
<div class="sourceCode" id="cb933"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb933-1"><a href="functions.html#cb933-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> <span class="fu">f1</span>() <span class="sc">|&gt;</span> <span class="fu">f2</span>() <span class="sc">|&gt;</span> <span class="fu">f3</span>()</span></code></pre></div>
<div class="sourceCode" id="cb934"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb934-1"><a href="functions.html#cb934-1" aria-hidden="true" tabindex="-1"></a>iris[, <span class="sc">-</span><span class="dv">5</span>] <span class="sc">|&gt;</span></span>
<span id="cb934-2"><a href="functions.html#cb934-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(iris<span class="sc">$</span>Species) <span class="sc">|&gt;</span></span>
<span id="cb934-3"><a href="functions.html#cb934-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="cf">function</span>(i) <span class="fu">sapply</span>(i, mean))</span></code></pre></div>
<pre><code>$setosa
Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
       5.006        3.428        1.462        0.246 

$versicolor
Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
       5.936        2.770        4.260        1.326 

$virginica
Sepal.Length  Sepal.Width Petal.Length  Petal.Width 
       6.588        2.974        5.552        2.026 </code></pre>
<p>Pipes are used extensively in the <a href="https://www.tidyverse.org">tidyverse</a> packages and many
other third-party packages.<br />
You can learn more about the magrittr pipe operator in the <a href="https://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html">vignette</a></p>
<div class="rmdtip">
<p>
In <a href="https://rstudio.com/">RStudio</a> the keyboard shortcut for the pipe operator is <code>Shift Command M</code> (MacOS) or <code>Ctrl Shift M</code> (Windows)
</p>
</div>
<div id="differences-between-native-pipe-and-magrittr" class="section level3" number="14.8.1">
<h3><span class="header-section-number">14.8.1</span> Differences between native pipe and <strong>magrittr</strong></h3>
<ul>
<li>native pipe requires <code>()</code> after function name, <strong>magrittr</strong> works with or without</li>
</ul>
<div class="sourceCode" id="cb936"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb936-1"><a href="functions.html#cb936-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">300</span>)</span></code></pre></div>
<div class="sourceCode" id="cb937"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb937-1"><a href="functions.html#cb937-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">|&gt;</span> <span class="fu">mean</span>()</span></code></pre></div>
<pre><code>[1] 0.06677626</code></pre>
<p>but this would fail:</p>
<div class="sourceCode" id="cb939"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb939-1"><a href="functions.html#cb939-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">|&gt;</span> mean</span></code></pre></div>
<p>while either works in <strong>magrittr</strong></p>
<div class="sourceCode" id="cb940"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb940-1"><a href="functions.html#cb940-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb940-2"><a href="functions.html#cb940-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">mean</span>()</span></code></pre></div>
<pre><code>[1] 0.06677626</code></pre>
<div class="sourceCode" id="cb942"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb942-1"><a href="functions.html#cb942-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> mean</span></code></pre></div>
<pre><code>[1] 0.06677626</code></pre>
<ul>
<li>native pipe by design only pipes its LHS to the first <strong><em>unnamed</em></strong> argument on the RHS. <strong>magrittr</strong> allows using a period <code>.</code> to pipe to any position on the RHS. The native pipe workaround is using an anonymous function (can use the new shorter syntax <code>\(x)</code> instead of <code>function(x)</code>)</li>
</ul>
<p>e.g.: Find the position of “r” in the latin alphabet</p>
<p>In this example, we want to pass the LHS to the second argument of <code>grep()</code>.</p>
<p>Using native pipe, we name the first argument <code>pattern</code> and the LHS is passed to the first unnamed argument, i.e. the second (which is <code>x</code>, the character vector where matches are looked for)</p>
<div class="sourceCode" id="cb944"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb944-1"><a href="functions.html#cb944-1" aria-hidden="true" tabindex="-1"></a>letters <span class="sc">|&gt;</span> <span class="fu">grep</span>(<span class="at">pattern =</span> <span class="st">&quot;r&quot;</span>)</span></code></pre></div>
<pre><code>[1] 18</code></pre>
<p>with <strong>magrittr</strong> you can use the dot notation to specify where to pipe into:</p>
<div class="sourceCode" id="cb946"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb946-1"><a href="functions.html#cb946-1" aria-hidden="true" tabindex="-1"></a>letters <span class="sc">%&gt;%</span> <span class="fu">grep</span>(<span class="st">&quot;r&quot;</span>, .)</span></code></pre></div>
<pre><code>[1] 18</code></pre>
<p>For demonstration, here’s the slightly involved way you would achieve this with an anonymous function and the native pipe. This may make sense for more complex calls.</p>
<div class="sourceCode" id="cb948"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb948-1"><a href="functions.html#cb948-1" aria-hidden="true" tabindex="-1"></a>letters <span class="sc">|&gt;</span> {\(x) <span class="fu">grep</span>(<span class="st">&quot;r&quot;</span>, x)}()</span></code></pre></div>
<pre><code>[1] 18</code></pre>

</div>
</div>
</div>
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Programming for Data Science in R</strong>" was written by Efstathios (Stathis) D. Gennatas, MBBS AICSM PhD. It was last built on 2021-11-29.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
